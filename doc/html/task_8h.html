<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>sgdk: task.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">sgdk</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('task_8h.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">task.h File Reference</div>  </div>
</div>
<div class="contents">

<p>User task support.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="task__cst_8h_source.html">task_cst.h</a>&quot;</code><br/>
</div>
<p><a href="task_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a45cd621c6b4c91c9028019752d6c0503"></a><!-- doxytag: member="task.h::TSK_init" ref="a45cd621c6b4c91c9028019752d6c0503" args="()" -->
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task_8h.html#a45cd621c6b4c91c9028019752d6c0503">TSK_init</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the task sub system (reset internal variables). <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task_8h.html#a7d32caeead8504a111a92399d472c5b0">TSK_userSet</a> (VoidCallback *task)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Configure the user task callback function.<br/>
 Must be set with a not NULL callback before calling any TSK_xxx functions.  <a href="#a7d32caeead8504a111a92399d472c5b0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab1643ceea50393530b282dc0e4681f5b"></a><!-- doxytag: member="task.h::TSK_stop" ref="ab1643ceea50393530b282dc0e4681f5b" args="(void)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task_8h.html#ab1643ceea50393530b282dc0e4681f5b">TSK_stop</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop the user task.<br/>
 This has the same effect than using TSK_setUser(NULL). <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a61b1da4d642cd8ea3eb533844747fc7b"></a><!-- doxytag: member="task.h::TSK_userYield" ref="a61b1da4d642cd8ea3eb533844747fc7b" args="(void)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task_8h.html#a61b1da4d642cd8ea3eb533844747fc7b">TSK_userYield</a> (void)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Yield from supervisor task to user task. The user task will resume and will use all the available CPU time until the next vertical blanking interrupt, that will resume the supervisor task. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#af6a258d8f3ee5206d682d799316314b1">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task_8h.html#ac7bee0d65012001b13e1f3209cdd9061">TSK_superPend</a> (<a class="el" href="types_8h.html#ad54124d5ddef23f4d85df6f12e3501a4">s16</a> wait)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Block supervisor task and resume user task. Supervisor task will not resume execution until <a class="el" href="task_8h.html#affb5cc5edf8b22d47abe8b92893fc037" title="Resume a blocked supervisor task. Must be called from user task.">TSK_superPost()</a> is called from user task or a timeout happens..  <a href="#ac7bee0d65012001b13e1f3209cdd9061"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task_8h.html#affb5cc5edf8b22d47abe8b92893fc037">TSK_superPost</a> (<a class="el" href="types_8h.html#af6a258d8f3ee5206d682d799316314b1">bool</a> immediate)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Resume a blocked supervisor task. Must be called from user task.  <a href="#affb5cc5edf8b22d47abe8b92893fc037"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>User task support. </p>
<dl class="date"><dt><b>Date:</b></dt><dd>12/2021 </dd></dl>
<dl class="author"><dt><b>Author:</b></dt><dd>doragasu</dd></dl>
<p>This module allows assigning a function that will run as an user task. CPU time is given to that function in several ways:</p>
<ul>
<li>When the supervisor task calls <a class="el" href="task_8h.html#a61b1da4d642cd8ea3eb533844747fc7b" title="Yield from supervisor task to user task. The user task will resume and will use all the available CPU...">TSK_userYield()</a>, the user task executes immediately until the next VBlank interrupt. Then supervisor task is resumed.</li>
<li>When the supervisor task call <a class="el" href="task_8h.html#ac7bee0d65012001b13e1f3209cdd9061" title="Block supervisor task and resume user task. Supervisor task will not resume execution until TSK_super...">TSK_superPend()</a>, the user task executes immediately until one of the following happens: a) The user task calls <a class="el" href="task_8h.html#ac7bee0d65012001b13e1f3209cdd9061" title="Block supervisor task and resume user task. Supervisor task will not resume execution until TSK_super...">TSK_superPend()</a>. b) The timeout specified in <a class="el" href="task_8h.html#affb5cc5edf8b22d47abe8b92893fc037" title="Resume a blocked supervisor task. Must be called from user task.">TSK_superPost()</a> expires.</li>
</ul>
<p>For the scheduler to work, VBlank interrupts must be enabled.</p>
<p>These functions are implemented in task.s </p>
</div><hr/><h2>Function Documentation</h2>
<a class="anchor" id="ac7bee0d65012001b13e1f3209cdd9061"></a><!-- doxytag: member="task.h::TSK_superPend" ref="ac7bee0d65012001b13e1f3209cdd9061" args="(s16 wait)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#af6a258d8f3ee5206d682d799316314b1">bool</a> TSK_superPend </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="types_8h.html#ad54124d5ddef23f4d85df6f12e3501a4">s16</a>&#160;</td>
          <td class="paramname"><em>wait</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Block supervisor task and resume user task. Supervisor task will not resume execution until <a class="el" href="task_8h.html#affb5cc5edf8b22d47abe8b92893fc037" title="Resume a blocked supervisor task. Must be called from user task.">TSK_superPost()</a> is called from user task or a timeout happens.. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">wait</td><td>Maximum number of frames to wait while blocking. Use TSK_PEND_FOREVER for an infinite wait, or a positive number (greater than 0) for a specific number of frames.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>false if task was awakened from user task, or true if timeout occurred. </dd></dl>

</div>
</div>
<a class="anchor" id="affb5cc5edf8b22d47abe8b92893fc037"></a><!-- doxytag: member="task.h::TSK_superPost" ref="affb5cc5edf8b22d47abe8b92893fc037" args="(bool immediate)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TSK_superPost </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="types_8h.html#af6a258d8f3ee5206d682d799316314b1">bool</a>&#160;</td>
          <td class="paramname"><em>immediate</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Resume a blocked supervisor task. Must be called from user task. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">immediate</td><td>If true, immediately causes a context switch to supervisor task. If false, context switch will not occur until the VBLANK interrupt. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a7d32caeead8504a111a92399d472c5b0"></a><!-- doxytag: member="task.h::TSK_userSet" ref="a7d32caeead8504a111a92399d472c5b0" args="(VoidCallback *task)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TSK_userSet </td>
          <td>(</td>
          <td class="paramtype">VoidCallback *&#160;</td>
          <td class="paramname"><em>task</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Configure the user task callback function.<br/>
 Must be set with a not NULL callback before calling any TSK_xxx functions. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">task</td><td>A function pointer to the user task (or NULL to disable multitasking). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="task_8h.html">task.h</a>      </li>
      <li class="footer">Generated on Thu Jul 27 2023 23:19:56 for sgdk by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


</body>
</html>
