<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>sgdk: megawifi.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">sgdk</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('megawifi_8h.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">megawifi.h</div>  </div>
</div>
<div class="contents">
<a href="megawifi_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/************************************************************************/</span>
<a name="l00026"></a>00026 <span class="preprocessor">#ifndef _MEGAWIFI_H_</span>
<a name="l00027"></a>00027 <span class="preprocessor"></span><span class="preprocessor">#define _MEGAWIFI_H_</span>
<a name="l00028"></a>00028 <span class="preprocessor"></span>
<a name="l00029"></a>00029 <span class="preprocessor">#include &quot;16c550.h&quot;</span>
<a name="l00030"></a>00030 <span class="preprocessor">#include &quot;<a class="code" href="mw-msg_8h.html" title="MegaWiFi command message definitions.">mw-msg.h</a>&quot;</span>
<a name="l00031"></a>00031 <span class="preprocessor">#include &quot;lsd.h&quot;</span>
<a name="l00032"></a>00032 
<a name="l00033"></a>00033 <span class="preprocessor">#if (MODULE_MEGAWIFI != 0)</span>
<a name="l00034"></a>00034 <span class="preprocessor"></span>
<a name="l00035"></a>00035 
<a name="l00037"></a>00037 <span class="preprocessor">#define MW_API_VERSION_MAJOR    1</span>
<a name="l00038"></a>00038 <span class="preprocessor"></span>
<a name="l00040"></a>00040 <span class="preprocessor">#define MW_API_VERSION_MINOR    5</span>
<a name="l00041"></a>00041 <span class="preprocessor"></span>
<a name="l00043"></a>00043 <span class="preprocessor">#define MW_COMMAND_TOUT_MS      1000</span>
<a name="l00044"></a>00044 <span class="preprocessor"></span>
<a name="l00045"></a>00045 <span class="preprocessor">#define MW_CONNECT_TOUT_MS      10000</span>
<a name="l00046"></a>00046 <span class="preprocessor"></span>
<a name="l00047"></a>00047 <span class="preprocessor">#define MW_HTTP_OPEN_TOUT_MS    10000</span>
<a name="l00048"></a>00048 <span class="preprocessor"></span>
<a name="l00049"></a>00049 <span class="preprocessor">#define MW_SCAN_TOUT_MS         10000</span>
<a name="l00050"></a>00050 <span class="preprocessor"></span>
<a name="l00051"></a>00051 <span class="preprocessor">#define MW_ASSOC_TOUT_MS        20000</span>
<a name="l00052"></a>00052 <span class="preprocessor"></span>
<a name="l00053"></a>00053 <span class="preprocessor">#define MW_ASSOC_WAIT_SLEEP_MS  5000</span>
<a name="l00054"></a>00054 <span class="preprocessor"></span>
<a name="l00055"></a>00055 <span class="preprocessor">#define MW_UPGRADE_TOUT_MS      180000</span>
<a name="l00056"></a>00056 <span class="preprocessor"></span>
<a name="l00057"></a>00057 <span class="preprocessor">#define MW_STAT_POLL_MS         250</span>
<a name="l00058"></a>00058 <span class="preprocessor"></span>
<a name="l00060"></a>00060 <span class="keyword">enum</span> mw_err {
<a name="l00061"></a>00061         MW_ERR_NONE = 0,                
<a name="l00062"></a>00062         MW_ERR,                         
<a name="l00063"></a>00063         MW_ERR_NOT_READY,               
<a name="l00064"></a>00064         MW_ERR_BUFFER_TOO_SHORT,        
<a name="l00065"></a>00065         MW_ERR_PARAM,                   
<a name="l00066"></a>00066         MW_ERR_SEND,                    
<a name="l00067"></a>00067         MW_ERR_RECV                     
<a name="l00068"></a>00068 };
<a name="l00069"></a>00069 
<a name="l00071"></a>00071 <span class="keyword">enum</span> mw_http_method {
<a name="l00072"></a>00072     MW_HTTP_METHOD_GET = 0,    
<a name="l00073"></a>00073     MW_HTTP_METHOD_POST,       
<a name="l00074"></a>00074     MW_HTTP_METHOD_PUT,        
<a name="l00075"></a>00075     MW_HTTP_METHOD_PATCH,      
<a name="l00076"></a>00076     MW_HTTP_METHOD_DELETE,     
<a name="l00077"></a>00077     MW_HTTP_METHOD_HEAD,       
<a name="l00078"></a>00078     MW_HTTP_METHOD_NOTIFY,     
<a name="l00079"></a>00079     MW_HTTP_METHOD_SUBSCRIBE,  
<a name="l00080"></a>00080     MW_HTTP_METHOD_UNSUBSCRIBE,
<a name="l00081"></a>00081     MW_HTTP_METHOD_OPTIONS,    
<a name="l00082"></a>00082     MW_HTTP_METHOD_MAX,
<a name="l00083"></a>00083 };
<a name="l00084"></a>00084 
<a name="l00088"></a>00088 <span class="preprocessor">#define MW__RESET       UART_MCR__OUT1  ///&lt; Reset out.</span>
<a name="l00089"></a>00089 <span class="preprocessor"></span><span class="preprocessor">#define MW__PRG         UART_MCR__OUT2  ///&lt; Program out.</span>
<a name="l00090"></a>00090 <span class="preprocessor"></span><span class="preprocessor">#define MW__PD          UART_MCR__DTR   ///&lt; Power Down out.</span>
<a name="l00091"></a>00091 <span class="preprocessor"></span><span class="preprocessor">#define MW__DAT         UART_MSR__DSR   ///&lt; Data request in.</span>
<a name="l00092"></a>00092 <span class="preprocessor"></span>
<a name="l00094"></a>00094 
<a name="l00095"></a>00095 <span class="preprocessor">#define MW_SSID_MAXLEN          32</span>
<a name="l00096"></a>00096 <span class="preprocessor"></span>
<a name="l00097"></a>00097 <span class="preprocessor">#define MW_PASS_MAXLEN          64</span>
<a name="l00098"></a>00098 <span class="preprocessor"></span>
<a name="l00099"></a>00099 <span class="preprocessor">#define MW_NTP_POOL_MAXLEN      80</span>
<a name="l00100"></a>00100 <span class="preprocessor"></span>
<a name="l00101"></a>00101 <span class="preprocessor">#define MW_NUM_CFG_SLOTS        3</span>
<a name="l00102"></a>00102 <span class="preprocessor"></span>
<a name="l00103"></a>00103 <span class="preprocessor">#define MW_NUM_DNS_SERVERS      2</span>
<a name="l00104"></a>00104 <span class="preprocessor"></span>
<a name="l00105"></a>00105 <span class="preprocessor">#define MW_FSM_QUEUE_LEN        8</span>
<a name="l00106"></a>00106 <span class="preprocessor"></span>
<a name="l00107"></a>00107 <span class="preprocessor">#define MW_MAX_SOCK                     3</span>
<a name="l00108"></a>00108 <span class="preprocessor"></span>
<a name="l00109"></a>00109 <span class="preprocessor">#define MW_CTRL_CH                      0</span>
<a name="l00110"></a>00110 <span class="preprocessor"></span>
<a name="l00111"></a>00111 <span class="preprocessor">#define MW_HTTP_CH                      LSD_MAX_CH - 1</span>
<a name="l00112"></a>00112 <span class="preprocessor"></span>
<a name="l00116"></a>00116 <span class="preprocessor">#define MW_CMD_MIN_BUFLEN       168</span>
<a name="l00117"></a>00117 <span class="preprocessor"></span>
<a name="l00119"></a>00119 <span class="keyword">struct </span>mw_ap_data {
<a name="l00120"></a>00120         <span class="keyword">enum</span> mw_security auth;  
<a name="l00121"></a>00121         uint8_t channel;        
<a name="l00122"></a>00122         int8_t rssi;            
<a name="l00123"></a>00123         uint8_t ssid_len;       
<a name="l00124"></a>00124         <span class="keywordtype">char</span> *ssid;             
<a name="l00125"></a>00125 };
<a name="l00126"></a>00126 
<a name="l00128"></a>00128 <span class="keyword">enum</span> mw_if_type {
<a name="l00129"></a>00129         MW_IF_STATION = 0,      
<a name="l00130"></a>00130         MW_IF_SOFTAP,           
<a name="l00131"></a>00131         MW_IF_MAX               
<a name="l00132"></a>00132 };
<a name="l00133"></a>00133 
<a name="l00134"></a>00134 <span class="comment">/************************************************************************/</span>
<a name="l00143"></a>00143 int16_t mw_init(uint16_t *cmd_buf, uint16_t buf_len);
<a name="l00144"></a>00144 
<a name="l00145"></a>00145 <span class="comment">/************************************************************************/</span>
<a name="l00153"></a>00153 <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">void</span> mw_process(<span class="keywordtype">void</span>)     {lsd_process();}
<a name="l00154"></a>00154 
<a name="l00155"></a>00155 <span class="comment">/************************************************************************/</span>
<a name="l00165"></a>00165 <span class="keywordtype">void</span> mw_cmd_data_cb_set(lsd_recv_cb cmd_recv_cb);
<a name="l00166"></a>00166 
<a name="l00167"></a>00167 <span class="comment">/************************************************************************/</span>
<a name="l00177"></a>00177 <span class="keyword">enum</span> mw_err mw_detect(uint8_t *major, uint8_t *minor, <span class="keywordtype">char</span> **variant);
<a name="l00178"></a>00178 
<a name="l00179"></a>00179 <span class="comment">/************************************************************************/</span>
<a name="l00187"></a>00187 <span class="keyword">enum</span> mw_err mw_version_get(uint8_t version[3], <span class="keywordtype">char</span> **variant);
<a name="l00188"></a>00188 
<a name="l00189"></a>00189 <span class="comment">/************************************************************************/</span>
<a name="l00196"></a>00196 uint8_t *mw_bssid_get(<span class="keyword">enum</span> mw_if_type interface_type);
<a name="l00197"></a>00197 
<a name="l00198"></a>00198 <span class="comment">/************************************************************************/</span>
<a name="l00206"></a>00206 <span class="keyword">enum</span> mw_err mw_default_cfg_set(<span class="keywordtype">void</span>);
<a name="l00207"></a>00207 
<a name="l00208"></a>00208 <span class="comment">/************************************************************************/</span>
<a name="l00223"></a>00223 <span class="keyword">enum</span> mw_err mw_ap_cfg_set(uint8_t slot, <span class="keyword">const</span> <span class="keywordtype">char</span> *ssid, <span class="keyword">const</span> <span class="keywordtype">char</span> *pass,
<a name="l00224"></a>00224                  <span class="keyword">enum</span> mw_phy_type phy_type);
<a name="l00225"></a>00225 
<a name="l00226"></a>00226 <span class="comment">/************************************************************************/</span>
<a name="l00240"></a>00240 <span class="keyword">enum</span> mw_err mw_ap_cfg_get(uint8_t slot, <span class="keywordtype">char</span> **ssid, <span class="keywordtype">char</span> **pass,
<a name="l00241"></a>00241                 <span class="keyword">enum</span> mw_phy_type *phy_type);
<a name="l00242"></a>00242 
<a name="l00243"></a>00243 <span class="comment">/************************************************************************/</span>
<a name="l00254"></a>00254 <span class="keyword">enum</span> mw_err mw_ip_cfg_set(uint8_t slot, <span class="keyword">const</span> <span class="keyword">struct</span> mw_ip_cfg *ip);
<a name="l00255"></a>00255 
<a name="l00256"></a>00256 <span class="comment">/************************************************************************/</span>
<a name="l00264"></a>00264 <span class="keyword">enum</span> mw_err mw_ip_cfg_get(uint8_t slot, <span class="keyword">struct</span> mw_ip_cfg **ip);
<a name="l00265"></a>00265 
<a name="l00266"></a>00266 <span class="comment">/************************************************************************/</span>
<a name="l00282"></a>00282 <span class="keyword">enum</span> mw_err mw_wifi_adv_cfg_set(<span class="keyword">const</span> <span class="keyword">struct</span> mw_wifi_adv_cfg *wifi);
<a name="l00283"></a>00283 
<a name="l00284"></a>00284 <span class="comment">/************************************************************************/</span>
<a name="l00289"></a>00289 <span class="keyword">struct </span>mw_wifi_adv_cfg *mw_wifi_adv_cfg_get(<span class="keywordtype">void</span>);
<a name="l00290"></a>00290 
<a name="l00291"></a>00291 <span class="comment">/************************************************************************/</span>
<a name="l00296"></a>00296 <span class="keyword">enum</span> mw_err mw_cfg_save(<span class="keywordtype">void</span>);
<a name="l00297"></a>00297 
<a name="l00298"></a>00298 <span class="comment">/************************************************************************/</span>
<a name="l00305"></a>00305 <span class="keyword">enum</span> mw_err mw_ip_current(<span class="keyword">struct</span> mw_ip_cfg **ip);
<a name="l00306"></a>00306 
<a name="l00307"></a>00307 <span class="comment">/************************************************************************/</span>
<a name="l00318"></a>00318 int16_t mw_ap_scan(<span class="keyword">enum</span> mw_phy_type phy_type, <span class="keywordtype">char</span> **ap_data, uint8_t *aps);
<a name="l00319"></a>00319 
<a name="l00320"></a>00320 <span class="comment">/************************************************************************/</span>
<a name="l00336"></a>00336 int16_t mw_ap_fill_next(<span class="keyword">const</span> <span class="keywordtype">char</span> *ap_data, uint16_t pos,
<a name="l00337"></a>00337                 <span class="keyword">struct</span> mw_ap_data *apd, uint16_t data_len);
<a name="l00338"></a>00338 
<a name="l00339"></a>00339 <span class="comment">/************************************************************************/</span>
<a name="l00346"></a>00346 <span class="keyword">enum</span> mw_err mw_ap_assoc(uint8_t slot);
<a name="l00347"></a>00347 
<a name="l00348"></a>00348 <span class="comment">/************************************************************************/</span>
<a name="l00358"></a>00358 <span class="keyword">enum</span> mw_err mw_ap_assoc_wait(int16_t tout_frames);
<a name="l00359"></a>00359 
<a name="l00360"></a>00360 <span class="comment">/************************************************************************/</span>
<a name="l00370"></a>00370 <span class="keyword">enum</span> mw_err mw_def_ap_cfg(uint8_t slot);
<a name="l00371"></a>00371 
<a name="l00372"></a>00372 <span class="comment">/************************************************************************/</span>
<a name="l00377"></a>00377 <span class="keyword">enum</span> mw_err mw_ap_disassoc(<span class="keywordtype">void</span>);
<a name="l00378"></a>00378 
<a name="l00379"></a>00379 <span class="comment">/************************************************************************/</span>
<a name="l00384"></a>00384 int16_t mw_def_ap_cfg_get(<span class="keywordtype">void</span>);
<a name="l00385"></a>00385 
<a name="l00386"></a>00386 <span class="comment">/************************************************************************/</span>
<a name="l00397"></a>00397 <span class="keyword">enum</span> mw_err mw_tcp_connect(uint8_t ch, <span class="keyword">const</span> <span class="keywordtype">char</span> *dst_addr,
<a name="l00398"></a>00398                 <span class="keyword">const</span> <span class="keywordtype">char</span> *dst_port, <span class="keyword">const</span> <span class="keywordtype">char</span> *src_port);
<a name="l00399"></a>00399 
<a name="l00400"></a>00400 <span class="comment">/************************************************************************/</span>
<a name="l00410"></a>00410 <span class="keyword">enum</span> mw_err mw_close(uint8_t ch);
<a name="l00411"></a>00411 
<a name="l00413"></a>00413 <span class="preprocessor">#define mw_tcp_disconnect(ch)   mw_close(ch)</span>
<a name="l00414"></a>00414 <span class="preprocessor"></span>
<a name="l00415"></a>00415 <span class="comment">/************************************************************************/</span>
<a name="l00427"></a>00427 <span class="keyword">enum</span> mw_err mw_udp_set(uint8_t ch, <span class="keyword">const</span> <span class="keywordtype">char</span> *dst_addr, <span class="keyword">const</span> <span class="keywordtype">char</span> *dst_port,
<a name="l00428"></a>00428                 <span class="keyword">const</span> <span class="keywordtype">char</span> *src_port);
<a name="l00429"></a>00429 
<a name="l00431"></a>00431 <span class="preprocessor">#define mw_udp_unset(ch)        mw_close(ch)</span>
<a name="l00432"></a>00432 <span class="preprocessor"></span>
<a name="l00433"></a>00433 <span class="comment">/************************************************************************/</span>
<a name="l00443"></a>00443 <span class="keyword">enum</span> mw_err mw_tcp_bind(uint8_t ch, uint16_t port);
<a name="l00444"></a>00444 
<a name="l00445"></a>00445 <span class="comment">/************************************************************************/</span>
<a name="l00455"></a>00455 <span class="keyword">enum</span> mw_err mw_sock_conn_wait(uint8_t ch, int16_t tout_frames);
<a name="l00456"></a>00456 
<a name="l00457"></a>00457 <span class="comment">/************************************************************************/</span>
<a name="l00467"></a>00467 <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">enum</span> lsd_status mw_recv(<span class="keywordtype">char</span> *buf, int16_t len, <span class="keywordtype">void</span> *ctx,
<a name="l00468"></a>00468                 lsd_recv_cb recv_cb)
<a name="l00469"></a>00469 {
<a name="l00470"></a>00470         <span class="keywordflow">return</span> lsd_recv(buf, len, ctx, recv_cb);
<a name="l00471"></a>00471 }
<a name="l00472"></a>00472 
<a name="l00473"></a>00473 <span class="comment">/************************************************************************/</span>
<a name="l00484"></a>00484 <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">enum</span> lsd_status mw_udp_reuse_recv(<span class="keyword">struct</span> mw_reuse_payload *data,
<a name="l00485"></a>00485                 int16_t len, <span class="keywordtype">void</span> *ctx, lsd_recv_cb recv_cb)
<a name="l00486"></a>00486 {
<a name="l00487"></a>00487         <span class="keywordflow">return</span> lsd_recv((<span class="keywordtype">char</span>*)data, len, ctx, recv_cb);
<a name="l00488"></a>00488 }
<a name="l00489"></a>00489 
<a name="l00490"></a>00490 <span class="comment">/************************************************************************/</span>
<a name="l00502"></a>00502 <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">enum</span> lsd_status mw_udp_reuse_send(uint8_t ch,
<a name="l00503"></a>00503                 <span class="keyword">const</span> <span class="keyword">struct</span> mw_reuse_payload *data, int16_t len, <span class="keywordtype">void</span> *ctx,
<a name="l00504"></a>00504                 lsd_send_cb send_cb)
<a name="l00505"></a>00505 {
<a name="l00506"></a>00506         <span class="keywordflow">return</span> lsd_send(ch, (<span class="keyword">const</span> <span class="keywordtype">char</span>*)data, len, ctx, send_cb);
<a name="l00507"></a>00507 }
<a name="l00508"></a>00508 
<a name="l00509"></a>00509 <span class="comment">/************************************************************************/</span>
<a name="l00527"></a>00527 <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">enum</span> lsd_status mw_send(uint8_t ch, <span class="keyword">const</span> <span class="keywordtype">char</span> *data, int16_t len,
<a name="l00528"></a>00528                 <span class="keywordtype">void</span> *ctx, lsd_send_cb send_cb)
<a name="l00529"></a>00529 {
<a name="l00530"></a>00530         <span class="keywordflow">return</span> lsd_send(ch, data, len, ctx, send_cb);
<a name="l00531"></a>00531 }
<a name="l00532"></a>00532 
<a name="l00533"></a>00533 <span class="comment">/************************************************************************/</span>
<a name="l00547"></a>00547 <span class="keyword">enum</span> mw_err mw_recv_sync(uint8_t *ch, <span class="keywordtype">char</span> *buf, int16_t *buf_len,
<a name="l00548"></a>00548                 int16_t tout_frames);
<a name="l00549"></a>00549 
<a name="l00550"></a>00550 <span class="comment">/************************************************************************/</span>
<a name="l00565"></a>00565 <span class="keyword">enum</span> mw_err mw_send_sync(uint8_t ch, <span class="keyword">const</span> <span class="keywordtype">char</span> *data, uint16_t len,
<a name="l00566"></a>00566                 int16_t tout_frames);
<a name="l00567"></a>00567 
<a name="l00568"></a>00568 <span class="comment">/************************************************************************/</span>
<a name="l00573"></a>00573 <span class="keyword">union </span>mw_msg_sys_stat *mw_sys_stat_get(<span class="keywordtype">void</span>);
<a name="l00574"></a>00574 
<a name="l00575"></a>00575 <span class="comment">/************************************************************************/</span>
<a name="l00582"></a>00582 <span class="keyword">enum</span> mw_sock_stat mw_sock_stat_get(uint8_t ch);
<a name="l00583"></a>00583 
<a name="l00584"></a>00584 <span class="comment">/************************************************************************/</span>
<a name="l00596"></a>00596 <span class="keyword">enum</span> mw_err mw_sntp_cfg_set(<span class="keyword">const</span> <span class="keywordtype">char</span> *tz_str, <span class="keyword">const</span> <span class="keywordtype">char</span> *server[3]);
<a name="l00597"></a>00597 
<a name="l00598"></a>00598 <span class="comment">/************************************************************************/</span>
<a name="l00607"></a>00607 <span class="keyword">enum</span> mw_err mw_sntp_cfg_get(<span class="keywordtype">char</span> **tz_str, <span class="keywordtype">char</span> *server[3]);
<a name="l00608"></a>00608 
<a name="l00609"></a>00609 <span class="comment">/************************************************************************/</span>
<a name="l00619"></a>00619 <span class="keywordtype">char</span> *mw_date_time_get(uint32_t dt_bin[2]);
<a name="l00620"></a>00620 
<a name="l00621"></a>00621 <span class="comment">/************************************************************************/</span>
<a name="l00629"></a>00629 <span class="keyword">enum</span> mw_err mw_flash_id_get(uint8_t *man_id, uint16_t *dev_id);
<a name="l00630"></a>00630 
<a name="l00631"></a>00631 <span class="comment">/************************************************************************/</span>
<a name="l00639"></a>00639 <span class="keyword">enum</span> mw_err mw_flash_sector_erase(uint16_t sect);
<a name="l00640"></a>00640 
<a name="l00641"></a>00641 <span class="comment">/************************************************************************/</span>
<a name="l00650"></a>00650 <span class="keyword">enum</span> mw_err mw_flash_write(uint32_t addr, uint8_t *data, uint16_t data_len);
<a name="l00651"></a>00651 
<a name="l00652"></a>00652 <span class="comment">/************************************************************************/</span>
<a name="l00660"></a>00660 uint8_t *mw_flash_read(uint32_t addr, uint16_t data_len);
<a name="l00661"></a>00661 
<a name="l00662"></a>00662 <span class="comment">/************************************************************************/</span>
<a name="l00665"></a>00665 <span class="preprocessor">#define mw_module_reset()       do{uart_set_bits(MCR, MW__RESET);}while(0)</span>
<a name="l00666"></a>00666 <span class="preprocessor"></span>
<a name="l00667"></a>00667 <span class="comment">/************************************************************************/</span>
<a name="l00670"></a>00670 <span class="preprocessor">#define mw_module_start()       do{uart_clr_bits(MCR, MW__RESET);}while(0)</span>
<a name="l00671"></a>00671 <span class="preprocessor"></span>
<a name="l00672"></a>00672 <span class="comment">/************************************************************************/</span>
<a name="l00683"></a>00683 <span class="keyword">enum</span> mw_err mw_gamertag_set(uint8_t slot, <span class="keyword">const</span> <span class="keyword">struct</span> mw_gamertag *gamertag);
<a name="l00684"></a>00684 
<a name="l00685"></a>00685 <span class="comment">/************************************************************************/</span>
<a name="l00692"></a>00692 <span class="keyword">struct </span>mw_gamertag *mw_gamertag_get(uint8_t slot);
<a name="l00693"></a>00693 
<a name="l00694"></a>00694 <span class="comment">/************************************************************************/</span>
<a name="l00701"></a>00701 <span class="keyword">enum</span> mw_err mw_log(<span class="keyword">const</span> <span class="keywordtype">char</span> *msg);
<a name="l00702"></a>00702 
<a name="l00703"></a>00703 <span class="comment">/************************************************************************/</span>
<a name="l00709"></a>00709 <span class="keyword">enum</span> mw_err mw_factory_settings(<span class="keywordtype">void</span>);
<a name="l00710"></a>00710 
<a name="l00711"></a>00711 <span class="comment">/************************************************************************/</span>
<a name="l00717"></a>00717 <span class="keywordtype">void</span> mw_power_off(<span class="keywordtype">void</span>);
<a name="l00718"></a>00718 
<a name="l00719"></a>00719 <span class="comment">/************************************************************************/</span>
<a name="l00724"></a>00724 <span class="keywordtype">void</span> mw_sleep(int16_t frames);
<a name="l00725"></a>00725 
<a name="l00726"></a>00726 <span class="comment">/************************************************************************/</span>
<a name="l00733"></a>00733 <span class="keyword">enum</span> mw_err mw_http_url_set(<span class="keyword">const</span> <span class="keywordtype">char</span> *url);
<a name="l00734"></a>00734 
<a name="l00735"></a>00735 <span class="comment">/************************************************************************/</span>
<a name="l00742"></a>00742 <span class="keyword">enum</span> mw_err mw_http_method_set(<span class="keyword">enum</span> mw_http_method method);
<a name="l00743"></a>00743 
<a name="l00744"></a>00744 <span class="comment">/************************************************************************/</span>
<a name="l00752"></a>00752 <span class="keyword">enum</span> mw_err mw_http_header_add(<span class="keyword">const</span> <span class="keywordtype">char</span> *key, <span class="keyword">const</span> <span class="keywordtype">char</span> *value);
<a name="l00753"></a>00753 
<a name="l00754"></a>00754 <span class="comment">/************************************************************************/</span>
<a name="l00761"></a>00761 <span class="keyword">enum</span> mw_err mw_http_header_del(<span class="keyword">const</span> <span class="keywordtype">char</span> *key);
<a name="l00762"></a>00762 
<a name="l00763"></a>00763 <span class="comment">/************************************************************************/</span>
<a name="l00775"></a>00775 <span class="keyword">enum</span> mw_err mw_http_open(uint32_t content_len);
<a name="l00776"></a>00776 
<a name="l00777"></a>00777 <span class="comment">/************************************************************************/</span>
<a name="l00795"></a>00795 int16_t mw_http_finish(uint32_t *content_len, int16_t tout_frames);
<a name="l00796"></a>00796 
<a name="l00797"></a>00797 <span class="comment">/************************************************************************/</span>
<a name="l00803"></a>00803 uint32_t mw_http_cert_query(<span class="keywordtype">void</span>);
<a name="l00804"></a>00804 
<a name="l00805"></a>00805 <span class="comment">/************************************************************************/</span>
<a name="l00822"></a>00822 <span class="keyword">enum</span> mw_err mw_http_cert_set(uint32_t cert_hash, <span class="keyword">const</span> <span class="keywordtype">char</span> *cert,
<a name="l00823"></a>00823                 uint16_t cert_len);
<a name="l00824"></a>00824 
<a name="l00825"></a>00825 <span class="comment">/************************************************************************/</span>
<a name="l00830"></a>00830 int16_t mw_http_cleanup(<span class="keywordtype">void</span>);
<a name="l00831"></a>00831 
<a name="l00832"></a>00832 <span class="comment">/************************************************************************/</span>
<a name="l00837"></a>00837 <span class="keywordtype">char</span> *mw_def_server_get(<span class="keywordtype">void</span>);
<a name="l00838"></a>00838 
<a name="l00839"></a>00839 <span class="comment">/************************************************************************/</span>
<a name="l00849"></a>00849 <span class="keyword">enum</span> mw_err mw_def_server_set(<span class="keyword">const</span> <span class="keywordtype">char</span> *server_url);
<a name="l00850"></a>00850 
<a name="l00851"></a>00851 <span class="comment">/************************************************************************/</span>
<a name="l00859"></a>00859 uint8_t *mw_hrng_get(uint16_t rnd_len);
<a name="l00860"></a>00860 
<a name="l00861"></a>00861 <span class="comment">/************************************************************************/</span>
<a name="l00873"></a>00873 <span class="keyword">enum</span> mw_err mw_ga_endpoint_set(<span class="keyword">const</span> <span class="keywordtype">char</span> *endpoint, <span class="keyword">const</span> <span class="keywordtype">char</span> *priv_key);
<a name="l00874"></a>00874 
<a name="l00875"></a>00875 <span class="comment">/************************************************************************/</span>
<a name="l00893"></a>00893 <span class="keyword">enum</span> mw_err mw_ga_key_value_add(<span class="keyword">const</span> <span class="keywordtype">char</span> **key, <span class="keyword">const</span> <span class="keywordtype">char</span> **value,
<a name="l00894"></a>00894                 uint16_t num_pairs);
<a name="l00895"></a>00895 
<a name="l00896"></a>00896 <span class="comment">/************************************************************************/</span>
<a name="l00926"></a>00926 int16_t mw_ga_request(<span class="keyword">enum</span> mw_http_method method, <span class="keyword">const</span> <span class="keywordtype">char</span> **path,
<a name="l00927"></a>00927                 uint8_t num_paths, <span class="keyword">const</span> <span class="keywordtype">char</span> **key, <span class="keyword">const</span> <span class="keywordtype">char</span> **value,
<a name="l00928"></a>00928                 uint8_t num_kv_pairs, uint32_t *content_len,
<a name="l00929"></a>00929                 int16_t tout_frames);
<a name="l00930"></a>00930 
<a name="l00931"></a>00931 <span class="comment">/************************************************************************/</span>
<a name="l00939"></a>00939 <span class="keyword">enum</span> mw_err mw_fw_upgrade(<span class="keyword">const</span> <span class="keywordtype">char</span> *name);
<a name="l00940"></a>00940 
<a name="l00941"></a>00941 <span class="comment">/****** THE FOLLOWING COMMANDS ARE LOWER LEVEL AND USUALLY NOT NEEDED ******/</span>
<a name="l00942"></a>00942 
<a name="l00943"></a>00943 <span class="comment">/************************************************************************/</span>
<a name="l00952"></a>00952 <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">enum</span> lsd_status mw_cmd_send(mw_cmd *cmd, <span class="keywordtype">void</span> *ctx,
<a name="l00953"></a>00953                 lsd_send_cb send_cb)
<a name="l00954"></a>00954 {
<a name="l00955"></a>00955         <span class="comment">// Send data on control channel (0).</span>
<a name="l00956"></a>00956         <span class="keywordflow">return</span> lsd_send(MW_CTRL_CH, cmd-&gt;packet, cmd-&gt;data_len + 4,
<a name="l00957"></a>00957                         ctx, send_cb);
<a name="l00958"></a>00958 }
<a name="l00959"></a>00959 
<a name="l00960"></a>00960 <span class="comment">/************************************************************************/</span>
<a name="l00969"></a>00969 <span class="keyword">static</span> <span class="keyword">inline</span> <span class="keyword">enum</span> lsd_status mw_cmd_recv(mw_cmd *rep, <span class="keywordtype">void</span> *ctx,
<a name="l00970"></a>00970                 lsd_recv_cb recv_cb) {
<a name="l00971"></a>00971         <span class="keywordflow">return</span> lsd_recv(rep-&gt;packet, <span class="keyword">sizeof</span>(mw_cmd), ctx, recv_cb);
<a name="l00972"></a>00972 }
<a name="l00973"></a>00973 
<a name="l00974"></a>00974 <span class="preprocessor">#endif // MODULE_MEGAWIFI</span>
<a name="l00975"></a>00975 <span class="preprocessor"></span>
<a name="l00976"></a>00976 <span class="preprocessor">#endif </span><span class="comment">/*_MEGAWIFI_H_*/</span>
<a name="l00977"></a>00977 
</pre></div></div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="megawifi_8h.html">megawifi.h</a>      </li>
      <li class="footer">Generated on Thu Jul 27 2023 23:19:55 for sgdk by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


</body>
</html>
