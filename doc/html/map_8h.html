<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>sgdk: map.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">sgdk</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('map_8h.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">map.h File Reference</div>  </div>
</div>
<div class="contents">

<p>MAP (large background map) management unit.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="vdp_8h_source.html">vdp.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="vdp__tile_8h_source.html">vdp_tile.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="pal_8h_source.html">pal.h</a>&quot;</code><br/>
</div>
<p><a href="map_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_map_definition.html">MapDefinition</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="struct_map_definition.html" title="MapDefinition structure which contains data for large level background.  It&#39;s optimized to encode lar...">MapDefinition</a> structure which contains data for large level background.<br/>
 It's optimized to encode large map using 128x128 block chunk (block chunk are organized in metatile).  <a href="struct_map_definition.html#details">More...</a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="struct_map.html">Map</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="struct_map.html" title="Map structure containing information for large background/plane update based on MapDefinition.">Map</a> structure containing information for large background/plane update based on <a class="el" href="struct_map_definition.html" title="MapDefinition structure which contains data for large level background.  It&#39;s optimized to encode lar...">MapDefinition</a>.  <a href="struct_map.html#details">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="struct_map.html">Map</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="map_8h.html#aca840b6acee4aaeed71f7bb576720f84">Map</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="struct_map.html" title="Map structure containing information for large background/plane update based on MapDefinition.">Map</a> structure containing information for large background/plane update based on <a class="el" href="struct_map_definition.html" title="MapDefinition structure which contains data for large level background.  It&#39;s optimized to encode lar...">MapDefinition</a>.  <a href="#aca840b6acee4aaeed71f7bb576720f84"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_map.html">Map</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="map_8h.html#ae6caf599926a96c6625000328b8cd296">MAP_create</a> (const <a class="el" href="struct_map_definition.html">MapDefinition</a> *mapDef, <a class="el" href="vdp_8h.html#a2e4eaa8c8f7f7c32c8021105122f98f8">VDPPlane</a> plane, <a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a> baseTile)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Create and return a <a class="el" href="struct_map.html" title="Map structure containing information for large background/plane update based on MapDefinition.">Map</a> structure required to use all MAP_xxx functions from a given <a class="el" href="struct_map_definition.html" title="MapDefinition structure which contains data for large level background.  It&#39;s optimized to encode lar...">MapDefinition</a>.<br/>
 When you're done with the map you shall use MAP_release(map) to release it.  <a href="#ae6caf599926a96c6625000328b8cd296"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="map_8h.html#a2cb897f724f50d502fe470b831dc81bf">MAP_release</a> (<a class="el" href="struct_map.html">Map</a> *map)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Release the map and its resources (same as MEM_free(map))  <a href="#a2cb897f724f50d502fe470b831dc81bf"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="map_8h.html#aa1fb89c58b51a5e7e274b2d607960744">MAP_scrollTo</a> (<a class="el" href="struct_map.html">Map</a> *map, <a class="el" href="types_8h.html#a449a74b72ed931d627eca7efcc6f8c9d">u32</a> x, <a class="el" href="types_8h.html#a449a74b72ed931d627eca7efcc6f8c9d">u32</a> y)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Scroll map to specified position.<br/>
 The fonction takes care of updating the VDP tilemap which will be transfered by DMA queue then VDP background scrolling is automatically set on VBlank (into the <a class="el" href="sys_8h.html#a753b47efe923d70d7c897a5b433efdc4" title="Wait for start of VBlank and do all the VBlank processing (DMA transfers, XGM driver tempo...">SYS_doVBlankProcess()</a> tasks).<br/>
 WARNING: first MAP_scrollTo(..) call will do a full plane update, for a 64x32 sized plane this represents 4KB of data.<br/>
 That means you can't initialize 2 MAPs in the same frame (limited to 7.2 KB of data per frame) so take care of calling <a class="el" href="sys_8h.html#a753b47efe923d70d7c897a5b433efdc4" title="Wait for start of VBlank and do all the VBlank processing (DMA transfers, XGM driver tempo...">SYS_doVBlankProcess()</a> in between.  <a href="#aa1fb89c58b51a5e7e274b2d607960744"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="map_8h.html#a29e8597ab70262c730dbcaa32088c3d3">MAP_scrollToEx</a> (<a class="el" href="struct_map.html">Map</a> *map, <a class="el" href="types_8h.html#a449a74b72ed931d627eca7efcc6f8c9d">u32</a> x, <a class="el" href="types_8h.html#a449a74b72ed931d627eca7efcc6f8c9d">u32</a> y, <a class="el" href="types_8h.html#af6a258d8f3ee5206d682d799316314b1">bool</a> forceRedraw)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Exactly as <a class="el" href="map_8h.html#aa1fb89c58b51a5e7e274b2d607960744" title="Scroll map to specified position.  The fonction takes care of updating the VDP tilemap which will be ...">MAP_scrollTo</a>(..) except we can force complete map drawing.  <a href="#a29e8597ab70262c730dbcaa32088c3d3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="map_8h.html#ad963c9683530a15354b6560c38568ea3">MAP_getMetaTile</a> (<a class="el" href="struct_map.html">Map</a> *map, <a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a> x, <a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a> y)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns given metatile attribute (a metatile is a block of 2x2 tiles = 16x16 pixels)  <a href="#ad963c9683530a15354b6560c38568ea3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="map_8h.html#abc85a62c5df559117e6d1f0e328b6008">MAP_getTile</a> (<a class="el" href="struct_map.html">Map</a> *map, <a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a> x, <a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a> y)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns given tile attribute (note than map-&gt;baseTile isn't added to the result)  <a href="#abc85a62c5df559117e6d1f0e328b6008"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="map_8h.html#a704c6968da1462c9c415223ccdf48890">MAP_getMetaTilemapRect</a> (<a class="el" href="struct_map.html">Map</a> *map, <a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a> x, <a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a> y, <a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a> w, <a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a> h, <a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a> *dest)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns metatiles attribute for the specified region (a metatile is a block of 2x2 tiles = 16x16 pixels)  <a href="#a704c6968da1462c9c415223ccdf48890"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="map_8h.html#ac25ba2fb4761652222cd45265dbb80b7">MAP_getTilemapRect</a> (<a class="el" href="struct_map.html">Map</a> *map, <a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a> x, <a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a> y, <a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a> w, <a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a> h, <a class="el" href="types_8h.html#af6a258d8f3ee5206d682d799316314b1">bool</a> column, <a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a> *dest)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns tiles attribute data for the specified region (map-&gt;baseTile is used as base tiles attribute, see <a class="el" href="map_8h.html#ae6caf599926a96c6625000328b8cd296" title="Create and return a Map structure required to use all MAP_xxx functions from a given MapDefinition...">MAP_create</a>(..))  <a href="#ac25ba2fb4761652222cd45265dbb80b7"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>MAP (large background map) management unit. </p>
<dl class="author"><dt><b>Author:</b></dt><dd>Stephane Dallongeville </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd>11/2020</dd></dl>
<p>This unit provides methods to manipulate / scroll large background MAP:<br/>
</p>
<ul>
<li>Create / release MAP object<br/>
</li>
<li>MAP decoding functions<br/>
</li>
<li>Large MAP scrolling engine<br/>
 <br/>
 Using MAP resource you can encode large image as a <a class="el" href="struct_map_definition.html" title="MapDefinition structure which contains data for large level background.  It&#39;s optimized to encode lar...">MapDefinition</a> structure which will be used to handle large background scrolling. The <a class="el" href="struct_map_definition.html" title="MapDefinition structure which contains data for large level background.  It&#39;s optimized to encode lar...">MapDefinition</a> structure is optimized to encode large map efficiently (space wise), here's the encoding format:<br/>
</li>
<li>background map is encoded as a grid of 128x128 pixels blocks<br/>
</li>
<li>duplicated 128x128 blocks are optimized (keep only 1 reference)<br/>
</li>
<li>each 128x128 blocks is encoded internally as a 8x8 grid of metatile<br/>
</li>
<li>a metatile is a 16x16 pixels block (2x2 tiles block)<br/>
</li>
<li>each duplicated / flipped metatile are optimized.<br/>
 <br/>
 Knowing that you can draw your level background to optimize its space usage by trying to optimize<br/>
 the number of unique 128x128 pixels block. </li>
</ul>
</div><hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="aca840b6acee4aaeed71f7bb576720f84"></a><!-- doxytag: member="map.h::Map" ref="aca840b6acee4aaeed71f7bb576720f84" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="struct_map.html">Map</a>  <a class="el" href="struct_map.html">Map</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><a class="el" href="struct_map.html" title="Map structure containing information for large background/plane update based on MapDefinition.">Map</a> structure containing information for large background/plane update based on <a class="el" href="struct_map_definition.html" title="MapDefinition structure which contains data for large level background.  It&#39;s optimized to encode lar...">MapDefinition</a>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">w</td><td>map width in block (128x128 pixels block) </td></tr>
    <tr><td class="paramname">h</td><td>map height in block (128x128 pixels block) </td></tr>
    <tr><td class="paramname">metaTiles</td><td>internal - unpacked data of MapDefinition.metaTiles </td></tr>
    <tr><td class="paramname">blocks</td><td>internal - unpacked data of MapDefinition.blocks </td></tr>
    <tr><td class="paramname">blockIndexes</td><td>internal - unpacked data of MapDefinition.blockIndexes </td></tr>
    <tr><td class="paramname">blockRowOffsets</td><td>internal - direct access of MapDefinition.blockRowOffsets </td></tr>
    <tr><td class="paramname">plane</td><td>VDP plane where MAP is draw </td></tr>
    <tr><td class="paramname">baseTile</td><td>Base tile attributes used to provide base tile index offset and base palette index (see <a class="el" href="vdp__tile_8h.html#a227664d5a689f3e02fc11c9fba95f84b" title="Encode tile attributes for tilemap data.">TILE_ATTR_FULL()</a> macro) </td></tr>
    <tr><td class="paramname">posX</td><td>current view position X set using <a class="el" href="map_8h.html#aa1fb89c58b51a5e7e274b2d607960744" title="Scroll map to specified position.  The fonction takes care of updating the VDP tilemap which will be ...">MAP_scrollTo</a>(..) method </td></tr>
    <tr><td class="paramname">posY</td><td>current view position Y set using <a class="el" href="map_8h.html#aa1fb89c58b51a5e7e274b2d607960744" title="Scroll map to specified position.  The fonction takes care of updating the VDP tilemap which will be ...">MAP_scrollTo</a>(..) method </td></tr>
    <tr><td class="paramname">wMask</td><td>internal </td></tr>
    <tr><td class="paramname">hMask</td><td>internal </td></tr>
    <tr><td class="paramname">planeWidthMask</td><td>internal </td></tr>
    <tr><td class="paramname">planeHeightMask</td><td>internal </td></tr>
    <tr><td class="paramname">lastXT</td><td>internal </td></tr>
    <tr><td class="paramname">lastYT</td><td>internal </td></tr>
    <tr><td class="paramname">prepareMapDataColumnCB</td><td>internal </td></tr>
    <tr><td class="paramname">prepareMapDataRowCB</td><td>internal </td></tr>
    <tr><td class="paramname">hScrollTable</td><td>internal </td></tr>
    <tr><td class="paramname">vScrollTable</td><td>internal </td></tr>
    <tr><td class="paramname">getMetaTileCB</td><td>internal </td></tr>
    <tr><td class="paramname">getMetaTilemapRectCB</td><td>internal </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ae6caf599926a96c6625000328b8cd296"></a><!-- doxytag: member="map.h::MAP_create" ref="ae6caf599926a96c6625000328b8cd296" args="(const MapDefinition *mapDef, VDPPlane plane, u16 baseTile)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_map.html">Map</a>* MAP_create </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="struct_map_definition.html">MapDefinition</a> *&#160;</td>
          <td class="paramname"><em>mapDef</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vdp_8h.html#a2e4eaa8c8f7f7c32c8021105122f98f8">VDPPlane</a>&#160;</td>
          <td class="paramname"><em>plane</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a>&#160;</td>
          <td class="paramname"><em>baseTile</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Create and return a <a class="el" href="struct_map.html" title="Map structure containing information for large background/plane update based on MapDefinition.">Map</a> structure required to use all MAP_xxx functions from a given <a class="el" href="struct_map_definition.html" title="MapDefinition structure which contains data for large level background.  It&#39;s optimized to encode lar...">MapDefinition</a>.<br/>
 When you're done with the map you shall use MAP_release(map) to release it. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">mapDef</td><td><a class="el" href="struct_map_definition.html" title="MapDefinition structure which contains data for large level background.  It&#39;s optimized to encode lar...">MapDefinition</a> structure containing background/plane data. </td></tr>
    <tr><td class="paramname">plane</td><td>Plane where we want to draw the <a class="el" href="struct_map.html" title="Map structure containing information for large background/plane update based on MapDefinition.">Map</a> (for <a class="el" href="map_8h.html#aa1fb89c58b51a5e7e274b2d607960744" title="Scroll map to specified position.  The fonction takes care of updating the VDP tilemap which will be ...">MAP_scrollTo</a>(..) method).<br/>
 Accepted values are:<br/>
<ul>
<li>BG_A<br/>
</li>
<li>BG_B<br/>
 If you want to use the map for collision or special behavior (using the MAP_getTile(..) method) then you can just let this parameter to 0. </li>
</ul>
</td></tr>
    <tr><td class="paramname">baseTile</td><td>Used to provide base tile index and base palette index (see <a class="el" href="vdp__tile_8h.html#a227664d5a689f3e02fc11c9fba95f84b" title="Encode tile attributes for tilemap data.">TILE_ATTR_FULL()</a> macro).<br/>
 Note that you can also use it to force HIGH priority but in that case your map should only contains LOW priority tiles otherwise the HIGH priority tiles will be set in LOW priority instead (mutually exclusive). </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>initialized <a class="el" href="struct_map.html" title="Map structure containing information for large background/plane update based on MapDefinition.">Map</a> structure or <em>NULL</em> if there is not enough memory to allocate data for given <a class="el" href="struct_map_definition.html" title="MapDefinition structure which contains data for large level background.  It&#39;s optimized to encode lar...">MapDefinition</a>. </dd></dl>

</div>
</div>
<a class="anchor" id="ad963c9683530a15354b6560c38568ea3"></a><!-- doxytag: member="map.h::MAP_getMetaTile" ref="ad963c9683530a15354b6560c38568ea3" args="(Map *map, u16 x, u16 y)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a> MAP_getMetaTile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_map.html">Map</a> *&#160;</td>
          <td class="paramname"><em>map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a>&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a>&#160;</td>
          <td class="paramname"><em>y</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns given metatile attribute (a metatile is a block of 2x2 tiles = 16x16 pixels) </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">map</td><td>source <a class="el" href="struct_map.html" title="Map structure containing information for large background/plane update based on MapDefinition.">Map</a> structure containing map information. </td></tr>
    <tr><td class="paramname">x</td><td>metatile X position </td></tr>
    <tr><td class="paramname">y</td><td>metatile Y position</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>metatile attribute:<br/>
<ul>
<li>b15: priority override<br/>
</li>
<li>b14-b13: free, can be used to encode collision info ?<br/>
</li>
<li>b12: combined vflip<br/>
</li>
<li>b11: combined hflip<br/>
</li>
<li>b10-b0: metatile index<br/>
</li>
</ul>
</dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="map_8h.html#ae6caf599926a96c6625000328b8cd296" title="Create and return a Map structure required to use all MAP_xxx functions from a given MapDefinition...">MAP_create</a>(..) </dd>
<dd>
<a class="el" href="map_8h.html#abc85a62c5df559117e6d1f0e328b6008" title="Returns given tile attribute (note than map-&gt;baseTile isn&#39;t added to the result)">MAP_getTile</a>(..) </dd>
<dd>
<a class="el" href="map_8h.html#a704c6968da1462c9c415223ccdf48890" title="Returns metatiles attribute for the specified region (a metatile is a block of 2x2 tiles = 16x16 pixe...">MAP_getMetaTilemapRect</a>(..) </dd></dl>

</div>
</div>
<a class="anchor" id="a704c6968da1462c9c415223ccdf48890"></a><!-- doxytag: member="map.h::MAP_getMetaTilemapRect" ref="a704c6968da1462c9c415223ccdf48890" args="(Map *map, u16 x, u16 y, u16 w, u16 h, u16 *dest)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MAP_getMetaTilemapRect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_map.html">Map</a> *&#160;</td>
          <td class="paramname"><em>map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a>&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a>&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a>&#160;</td>
          <td class="paramname"><em>w</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a>&#160;</td>
          <td class="paramname"><em>h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a> *&#160;</td>
          <td class="paramname"><em>dest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns metatiles attribute for the specified region (a metatile is a block of 2x2 tiles = 16x16 pixels) </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">map</td><td>source <a class="el" href="struct_map.html" title="Map structure containing information for large background/plane update based on MapDefinition.">Map</a> structure containing map information. </td></tr>
    <tr><td class="paramname">x</td><td>Region X start position (in metatile). </td></tr>
    <tr><td class="paramname">y</td><td>Region Y start position (in metatile). </td></tr>
    <tr><td class="paramname">w</td><td>Region Width (in metatile). </td></tr>
    <tr><td class="paramname">h</td><td>Region Heigh (in metatile). </td></tr>
    <tr><td class="paramname">dest</td><td>destination pointer receiving metatiles attribute data</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>metatiles attribute:<br/>
<ul>
<li>b15: priority override<br/>
</li>
<li>b14-b13: free, can be used to encode collision info ?<br/>
</li>
<li>b12: combined vflip<br/>
</li>
<li>b11: combined hflip<br/>
</li>
<li>b10-b0: metatile index<br/>
</li>
</ul>
</dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="map_8h.html#ae6caf599926a96c6625000328b8cd296" title="Create and return a Map structure required to use all MAP_xxx functions from a given MapDefinition...">MAP_create</a>(..) </dd>
<dd>
<a class="el" href="map_8h.html#ac25ba2fb4761652222cd45265dbb80b7" title="Returns tiles attribute data for the specified region (map-&gt;baseTile is used as base tiles attribute...">MAP_getTilemapRect</a>(..) </dd></dl>

</div>
</div>
<a class="anchor" id="abc85a62c5df559117e6d1f0e328b6008"></a><!-- doxytag: member="map.h::MAP_getTile" ref="abc85a62c5df559117e6d1f0e328b6008" args="(Map *map, u16 x, u16 y)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a> MAP_getTile </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_map.html">Map</a> *&#160;</td>
          <td class="paramname"><em>map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a>&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a>&#160;</td>
          <td class="paramname"><em>y</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns given tile attribute (note than map-&gt;baseTile isn't added to the result) </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">map</td><td>source <a class="el" href="struct_map.html" title="Map structure containing information for large background/plane update based on MapDefinition.">Map</a> structure containing map information. </td></tr>
    <tr><td class="paramname">x</td><td>tile X position </td></tr>
    <tr><td class="paramname">y</td><td>tile Y position</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>tile attribute:<br/>
<ul>
<li>b15: priority<br/>
</li>
<li>b14-b13: palette<br/>
</li>
<li>b12: vflip<br/>
</li>
<li>b11: hflip<br/>
</li>
<li>b10-b0: tile index</li>
</ul>
</dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="map_8h.html#ae6caf599926a96c6625000328b8cd296" title="Create and return a Map structure required to use all MAP_xxx functions from a given MapDefinition...">MAP_create</a>(..) </dd>
<dd>
<a class="el" href="map_8h.html#ad963c9683530a15354b6560c38568ea3" title="Returns given metatile attribute (a metatile is a block of 2x2 tiles = 16x16 pixels)">MAP_getMetaTile</a>(..) </dd>
<dd>
<a class="el" href="map_8h.html#ac25ba2fb4761652222cd45265dbb80b7" title="Returns tiles attribute data for the specified region (map-&gt;baseTile is used as base tiles attribute...">MAP_getTilemapRect</a>(..) </dd></dl>

</div>
</div>
<a class="anchor" id="ac25ba2fb4761652222cd45265dbb80b7"></a><!-- doxytag: member="map.h::MAP_getTilemapRect" ref="ac25ba2fb4761652222cd45265dbb80b7" args="(Map *map, u16 x, u16 y, u16 w, u16 h, bool column, u16 *dest)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MAP_getTilemapRect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_map.html">Map</a> *&#160;</td>
          <td class="paramname"><em>map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a>&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a>&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a>&#160;</td>
          <td class="paramname"><em>w</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a>&#160;</td>
          <td class="paramname"><em>h</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#af6a258d8f3ee5206d682d799316314b1">bool</a>&#160;</td>
          <td class="paramname"><em>column</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a> *&#160;</td>
          <td class="paramname"><em>dest</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns tiles attribute data for the specified region (map-&gt;baseTile is used as base tiles attribute, see <a class="el" href="map_8h.html#ae6caf599926a96c6625000328b8cd296" title="Create and return a Map structure required to use all MAP_xxx functions from a given MapDefinition...">MAP_create</a>(..)) </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">map</td><td>source <a class="el" href="struct_map.html" title="Map structure containing information for large background/plane update based on MapDefinition.">Map</a> structure containing map information. </td></tr>
    <tr><td class="paramname">x</td><td>Region X start position <b>(in metatile)</b> </td></tr>
    <tr><td class="paramname">y</td><td>Region Y start position <b>(in metatile)</b> </td></tr>
    <tr><td class="paramname">w</td><td>Region Width <b>(in metatile)</b> </td></tr>
    <tr><td class="paramname">h</td><td>Region Heigh <b>(in metatile)</b> </td></tr>
    <tr><td class="paramname">column</td><td>if set to TRUE then tilemap data is stored by column order [Y,X] instead of row order [X,Y]. </td></tr>
    <tr><td class="paramname">dest</td><td>destination pointer receiving tiles attribute data</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>tiles attribute:<br/>
<ul>
<li>b15: priority<br/>
</li>
<li>b14-b13: palette<br/>
</li>
<li>b12: vflip<br/>
</li>
<li>b11: hflip<br/>
</li>
<li>b10-b0: tile index</li>
</ul>
</dd></dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="map_8h.html#ae6caf599926a96c6625000328b8cd296" title="Create and return a Map structure required to use all MAP_xxx functions from a given MapDefinition...">MAP_create</a>(..) </dd>
<dd>
<a class="el" href="map_8h.html#abc85a62c5df559117e6d1f0e328b6008" title="Returns given tile attribute (note than map-&gt;baseTile isn&#39;t added to the result)">MAP_getTile</a>(..) </dd>
<dd>
<a class="el" href="map_8h.html#a704c6968da1462c9c415223ccdf48890" title="Returns metatiles attribute for the specified region (a metatile is a block of 2x2 tiles = 16x16 pixe...">MAP_getMetaTilemapRect</a>(..) </dd></dl>

</div>
</div>
<a class="anchor" id="a2cb897f724f50d502fe470b831dc81bf"></a><!-- doxytag: member="map.h::MAP_release" ref="a2cb897f724f50d502fe470b831dc81bf" args="(Map *map)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MAP_release </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_map.html">Map</a> *&#160;</td>
          <td class="paramname"><em>map</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Release the map and its resources (same as MEM_free(map)) </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">map</td><td>the <a class="el" href="struct_map.html" title="Map structure containing information for large background/plane update based on MapDefinition.">Map</a> structure to release </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aa1fb89c58b51a5e7e274b2d607960744"></a><!-- doxytag: member="map.h::MAP_scrollTo" ref="aa1fb89c58b51a5e7e274b2d607960744" args="(Map *map, u32 x, u32 y)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MAP_scrollTo </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_map.html">Map</a> *&#160;</td>
          <td class="paramname"><em>map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a449a74b72ed931d627eca7efcc6f8c9d">u32</a>&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a449a74b72ed931d627eca7efcc6f8c9d">u32</a>&#160;</td>
          <td class="paramname"><em>y</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Scroll map to specified position.<br/>
 The fonction takes care of updating the VDP tilemap which will be transfered by DMA queue then VDP background scrolling is automatically set on VBlank (into the <a class="el" href="sys_8h.html#a753b47efe923d70d7c897a5b433efdc4" title="Wait for start of VBlank and do all the VBlank processing (DMA transfers, XGM driver tempo...">SYS_doVBlankProcess()</a> tasks).<br/>
 WARNING: first MAP_scrollTo(..) call will do a full plane update, for a 64x32 sized plane this represents 4KB of data.<br/>
 That means you can't initialize 2 MAPs in the same frame (limited to 7.2 KB of data per frame) so take care of calling <a class="el" href="sys_8h.html#a753b47efe923d70d7c897a5b433efdc4" title="Wait for start of VBlank and do all the VBlank processing (DMA transfers, XGM driver tempo...">SYS_doVBlankProcess()</a> in between. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">map</td><td><a class="el" href="struct_map.html" title="Map structure containing information for large background/plane update based on MapDefinition.">Map</a> structure containing map information. </td></tr>
    <tr><td class="paramname">x</td><td>view position X we want to scroll on </td></tr>
    <tr><td class="paramname">y</td><td>view position Y we want to scroll on</td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="map_8h.html#ae6caf599926a96c6625000328b8cd296" title="Create and return a Map structure required to use all MAP_xxx functions from a given MapDefinition...">MAP_create</a>(..) </dd></dl>

</div>
</div>
<a class="anchor" id="a29e8597ab70262c730dbcaa32088c3d3"></a><!-- doxytag: member="map.h::MAP_scrollToEx" ref="a29e8597ab70262c730dbcaa32088c3d3" args="(Map *map, u32 x, u32 y, bool forceRedraw)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MAP_scrollToEx </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_map.html">Map</a> *&#160;</td>
          <td class="paramname"><em>map</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a449a74b72ed931d627eca7efcc6f8c9d">u32</a>&#160;</td>
          <td class="paramname"><em>x</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#a449a74b72ed931d627eca7efcc6f8c9d">u32</a>&#160;</td>
          <td class="paramname"><em>y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="types_8h.html#af6a258d8f3ee5206d682d799316314b1">bool</a>&#160;</td>
          <td class="paramname"><em>forceRedraw</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Exactly as <a class="el" href="map_8h.html#aa1fb89c58b51a5e7e274b2d607960744" title="Scroll map to specified position.  The fonction takes care of updating the VDP tilemap which will be ...">MAP_scrollTo</a>(..) except we can force complete map drawing. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">map</td><td><a class="el" href="struct_map.html" title="Map structure containing information for large background/plane update based on MapDefinition.">Map</a> structure containing map information. </td></tr>
    <tr><td class="paramname">x</td><td>view position X we want to scroll on </td></tr>
    <tr><td class="paramname">y</td><td>view position Y we want to scroll on </td></tr>
    <tr><td class="paramname">forceRedraw</td><td>Set to <em>TRUE</em> to force a complete map redraw (take more time)</td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="map_8h.html#aa1fb89c58b51a5e7e274b2d607960744" title="Scroll map to specified position.  The fonction takes care of updating the VDP tilemap which will be ...">MAP_scrollTo</a>(..) </dd></dl>

</div>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="map_8h.html">map.h</a>      </li>
      <li class="footer">Generated on Wed Jan 31 2024 23:59:38 for sgdk by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


</body>
</html>
