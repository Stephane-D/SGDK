<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>sgdk: xgm.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript">
$(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.4 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">sgdk</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
  initNavTree('xgm_8h.html','');
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#define-members">Defines</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">xgm.h File Reference</div>  </div>
</div>
<div class="contents">

<p>XGM sound driver.  
<a href="#details">More...</a></p>

<p><a href="xgm_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xgm_8h.html#a14e479b408a089d87b0d40e15dd99f48">DRIVER_FLAG_MANUALSYNC_XGM</a>&#160;&#160;&#160;(1 &lt;&lt; 0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="affdd891b1e1ce78e385c76be27a0bf70"></a><!-- doxytag: member="xgm.h::DRIVER_FLAG_DELAYDMA_XGM" ref="affdd891b1e1ce78e385c76be27a0bf70" args="" -->
#define&#160;</td><td class="memItemRight" valign="bottom"><b>DRIVER_FLAG_DELAYDMA_XGM</b>&#160;&#160;&#160;(1 &lt;&lt; 1)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xgm_8h.html#a640c992fde66716a21c259b497adf98d">XGM_nextFrame</a>()&#160;&#160;&#160;XGM_nextXFrame(1)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Notify the Z80 a new frame just happened (XGM music player driver).  <a href="#a640c992fde66716a21c259b497adf98d"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a9d4225ad20bed9dc7c72802b6d85328f"></a><!-- doxytag: member="xgm.h::XGM_isPlaying" ref="a9d4225ad20bed9dc7c72802b6d85328f" args="()" -->
<a class="el" href="types_8h.html#ab9f930ae0484417a1883fd3f7cdb490e">u8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xgm_8h.html#a9d4225ad20bed9dc7c72802b6d85328f">XGM_isPlaying</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns play music state (XGM music player driver). <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xgm_8h.html#a6c9a3bf84dde1b65d38f6ea4ce65a362">XGM_startPlay</a> (const <a class="el" href="types_8h.html#ab9f930ae0484417a1883fd3f7cdb490e">u8</a> *song)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Start playing the specified XGM track (XGM music player driver).  <a href="#a6c9a3bf84dde1b65d38f6ea4ce65a362"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xgm_8h.html#a00e8cc267ce9301beb17bf2cf9662d71">XGM_stopPlay</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop playing music (XGM music player driver).  <a href="#a00e8cc267ce9301beb17bf2cf9662d71"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xgm_8h.html#a8a0eda7746cc40e0642b3fab58d79584">XGM_pausePlay</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Pause playing music, music can be resumed by calling <a class="el" href="xgm_8h.html#adfcc6dfd90ee5311c04cfd7947f7c32c" title="Resume playing music after pausing with XGM_pausePlay (XGM music player driver).  Note that due to th...">XGM_resumePlay</a> (XGM music player driver).<br/>
 Note that due to the nature of the music chip (FM synthesis), resume play operation will never be perfect and some notes will miss until next key-on event occurs.  <a href="#a8a0eda7746cc40e0642b3fab58d79584"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xgm_8h.html#adfcc6dfd90ee5311c04cfd7947f7c32c">XGM_resumePlay</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Resume playing music after pausing with XGM_pausePlay (XGM music player driver).<br/>
 Note that due to the nature of the music chip (FM synthesis), resume play operation will never be perfect and some notes will miss until next key-on event occurs.  <a href="#adfcc6dfd90ee5311c04cfd7947f7c32c"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#ab9f930ae0484417a1883fd3f7cdb490e">u8</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xgm_8h.html#a3446bcd38404e76b891dd4652f8568d8">XGM_isPlayingPCM</a> (const <a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a> channel_mask)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Return play status of specified PCM channel (XGM music player driver).  <a href="#a3446bcd38404e76b891dd4652f8568d8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xgm_8h.html#a9203faa0b1ebfe1f264095affc4b9562">XGM_setPCM</a> (const <a class="el" href="types_8h.html#ab9f930ae0484417a1883fd3f7cdb490e">u8</a> id, const <a class="el" href="types_8h.html#ab9f930ae0484417a1883fd3f7cdb490e">u8</a> *sample, const <a class="el" href="types_8h.html#a449a74b72ed931d627eca7efcc6f8c9d">u32</a> len)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Declare a new PCM sample (maximum = 255) for the XGM music player driver.<br/>
 Sample id &lt; 64 are reserved for music while others are used for SFX so if you want to declare a new SFX PCM sample use an id &gt;= 64.  <a href="#a9203faa0b1ebfe1f264095affc4b9562"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xgm_8h.html#a0f22f83f4c2fbebf4b51a4f87c193a3f">XGM_setPCMFast</a> (const <a class="el" href="types_8h.html#ab9f930ae0484417a1883fd3f7cdb490e">u8</a> id, const <a class="el" href="types_8h.html#ab9f930ae0484417a1883fd3f7cdb490e">u8</a> *sample, const <a class="el" href="types_8h.html#a449a74b72ed931d627eca7efcc6f8c9d">u32</a> len)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Same as <a class="el" href="xgm_8h.html#a9203faa0b1ebfe1f264095affc4b9562" title="Declare a new PCM sample (maximum = 255) for the XGM music player driver.  Sample id &lt; 64 are reserve...">XGM_setPCM</a> but fast version.<br/>
 This method assume that XGM driver is loaded and that 68000 has access to Z80 bus.  <a href="#a0f22f83f4c2fbebf4b51a4f87c193a3f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xgm_8h.html#a5dbd3b8171aca6cc18e8c83719ec2785">XGM_startPlayPCM</a> (const <a class="el" href="types_8h.html#ab9f930ae0484417a1883fd3f7cdb490e">u8</a> id, const <a class="el" href="types_8h.html#ab9f930ae0484417a1883fd3f7cdb490e">u8</a> priority, const <a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a> channel)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Play a PCM sample on specified channel (XGM music player driver).<br/>
 If a sample was currently playing on this channel then priority of the newer sample should be are compared then it's stopped and the new sample is played instead.<br/>
 Note that music may use the first PCM channel so it's better to use channel 2 to 4 for SFX.  <a href="#a5dbd3b8171aca6cc18e8c83719ec2785"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xgm_8h.html#a54ea961467892bb1232c535af317fb05">XGM_stopPlayPCM</a> (const <a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a> channel)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop play PCM on specified channel (XGM music player driver).<br/>
 No effect if no sample was currently playing on this channel.  <a href="#a54ea961467892bb1232c535af317fb05"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#a449a74b72ed931d627eca7efcc6f8c9d">u32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xgm_8h.html#a917a5da737badb6591cb5a76585ac9ad">XGM_getElapsed</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Return the elapsed play time since the last <a class="el" href="xgm_8h.html#a6c9a3bf84dde1b65d38f6ea4ce65a362" title="Start playing the specified XGM track (XGM music player driver).">XGM_startPlay</a>(..) call.<br/>
 The returned value is in music frame which can be 50/60 per second depending the base music play rate (NTSC/PAL).  <a href="#a917a5da737badb6591cb5a76585ac9ad"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xgm_8h.html#aaf398bd127f974895a8b6b3042c1a99a">XGM_getMusicTempo</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the current music tempo (in tick per second).<br/>
 Default value is 60 or 50 depending the system is NTSC or PAL.<br/>
 This method is meaningful only if you use the automatic music sync mode (see <a class="el" href="xgm_8h.html#ac749922b1e66baf6a7e86e0277cf90fa" title="Set manual sync mode of XGM driver (by default auto sync is used).">XGM_setManualSync()</a> method) which is the default mode.<br/>
 Note that using specific tempo (not 60 or 50) will affect performance of DMA contention and external command parsing so it's recommended to stand with default one.  <a href="#aaf398bd127f974895a8b6b3042c1a99a"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xgm_8h.html#a0c8bcd5a25ed74ee379b2c415a25e95d">XGM_setMusicTempo</a> (<a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a> value)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the music tempo (in tick per second).<br/>
 Default value is 60 or 50 depending the system is NTSC or PAL. This method is meaningful only if you use the automatic music sync mode (see <a class="el" href="xgm_8h.html#ac749922b1e66baf6a7e86e0277cf90fa" title="Set manual sync mode of XGM driver (by default auto sync is used).">XGM_setManualSync()</a> method) which is the default mode.<br/>
 Note that using specific tempo (not 60 or 50) can completely distord FM instruments sound and affect performance of DMA contention and external command parsing so it's recommended to stand with default one.  <a href="#a0c8bcd5a25ed74ee379b2c415a25e95d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xgm_8h.html#aef580c937fc13c77d6940fa1f4f5a516">XGM_getManualSync</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns manual sync mode state of XGM driver (by default auto sync is used).  <a href="#aef580c937fc13c77d6940fa1f4f5a516"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xgm_8h.html#ac749922b1e66baf6a7e86e0277cf90fa">XGM_setManualSync</a> (<a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a> value)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set manual sync mode of XGM driver (by default auto sync is used).  <a href="#ac749922b1e66baf6a7e86e0277cf90fa"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xgm_8h.html#acc620b1aa0f67a88a2757184409b418e">XGM_nextXFrame</a> (<a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a> num)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Same as <a class="el" href="xgm_8h.html#a640c992fde66716a21c259b497adf98d" title="Notify the Z80 a new frame just happened (XGM music player driver).">XGM_nextFrame()</a> except you can specify the numer of frame.  <a href="#acc620b1aa0f67a88a2757184409b418e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac59f86a0e6911a8cfca21c72bbc155e7"></a><!-- doxytag: member="xgm.h::XGM_setLoopNumber" ref="ac59f86a0e6911a8cfca21c72bbc155e7" args="(s8 value)" -->
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xgm_8h.html#ac59f86a0e6911a8cfca21c72bbc155e7">XGM_setLoopNumber</a> (<a class="el" href="types_8h.html#a8183072ed84abc0729df0f585ef37555">s8</a> value)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the loop number for music with loop command.<br/>
 Default value is -1 for pseudo unfinite (255) loops plays. A value of 0 means single play without any loop, 1 = single play + 1 loop... <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xgm_8h.html#a09d28faaea58861315be8021cfe29246">XGM_set68KBUSProtection</a> (<a class="el" href="types_8h.html#ab9f930ae0484417a1883fd3f7cdb490e">u8</a> value)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Set temporary 68K BUS protection from Z80 (XGM music player driver).<br/>
 You should protect BUS Access during DMA and restore it after:<br/>
 XGM_set68KBUSProtection(TRUE); <a class="el" href="vdp__dma_8h.html#a0806f0a5e7e102869a653e0a8d573959">VDP_doVRamDMA(data, 0x1000, 0x100)</a>; XGM_set68KBUSProtection(FALSE);.  <a href="#a09d28faaea58861315be8021cfe29246"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xgm_8h.html#ad9dc54c2a7cd28a45c94df19a02b6477">XGM_getForceDelayDMA</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns <a class="el" href="types_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d" title="TRUE define (equivalent to 1).">TRUE</a> if DMA delay is enabled to improve PCM playback.  <a href="#ad9dc54c2a7cd28a45c94df19a02b6477"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xgm_8h.html#a073c7829b30f3065a3fa11a4320901e7">XGM_setForceDelayDMA</a> (<a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a> value)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">This method can be used to improve the PCM playback during XGM music play and while DMA queue is used.<br/>
 Even using the BUS protection with <a class="el" href="xgm_8h.html#a09d28faaea58861315be8021cfe29246" title="Set temporary 68K BUS protection from Z80 (XGM music player driver).  You should protect BUS Access d...">XGM_set68KBUSProtection</a> you may experience some altered PCM when the XGM music contains PSG data, this is because the Z80 uses the main BUS to access PSG.<br/>
 By delaying a bit the DMA execution from the DMA queue we let the Z80 to execute all PSG commands and avoid any stall. The delay is about 3 scanlines so using the force delay DMA will reduce the DMA bandwidth for about 3 vblank lines.  <a href="#a073c7829b30f3065a3fa11a4320901e7"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a64e735e6a2de4aef7a93ae48e6a85457"></a><!-- doxytag: member="xgm.h::XGM_getCPULoad" ref="a64e735e6a2de4aef7a93ae48e6a85457" args="()" -->
<a class="el" href="types_8h.html#a449a74b72ed931d627eca7efcc6f8c9d">u32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xgm_8h.html#a64e735e6a2de4aef7a93ae48e6a85457">XGM_getCPULoad</a> ()</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns an estimation of the Z80 CPU load (XGM driver).<br/>
 The low 16 bits returns the estimated Z80 CPU load where the high 16 bits returns the part spent waiting in the DMA contention (see <a class="el" href="xgm_8h.html#a09d28faaea58861315be8021cfe29246" title="Set temporary 68K BUS protection from Z80 (XGM music player driver).  You should protect BUS Access d...">XGM_set68KBUSProtection</a> method).<br/>
 The method computes CPU load mean over 32 frames and so it's important to call it at each frame (on VInt for instance) to get meaningful value.<br/>
 Note that it returns CPu load only for the XGM music parsing part as PCM channel mixing is always ON.<br/>
 Idle usage is 40% on NTSC and 30% on PAL, 100% usage usually mean overrun and may result in music slowdown and incorrect PCM operations. <br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>XGM sound driver. </p>
<dl class="author"><dt><b>Author:</b></dt><dd>Stephane Dallongeville </dd></dl>
<dl class="date"><dt><b>Date:</b></dt><dd>08/2015</dd></dl>
<p>This unit provides methods to use the XGM (eXtended Genesis Music) sound driver.<br/>
 This driver takes VGM (or XGM) file as input to play music.<br/>
 It supports 4 PCM channels at a fixed 14 Khz and allows to play SFX through PCM with 16 level of priority.<br/>
 The driver is designed to avoid DMA contention when possible (depending CPU load). </p>
</div><hr/><h2>Define Documentation</h2>
<a class="anchor" id="a14e479b408a089d87b0d40e15dd99f48"></a><!-- doxytag: member="xgm.h::DRIVER_FLAG_MANUALSYNC_XGM" ref="a14e479b408a089d87b0d40e15dd99f48" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DRIVER_FLAG_MANUALSYNC_XGM&#160;&#160;&#160;(1 &lt;&lt; 0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Internal use </p>

</div>
</div>
<a class="anchor" id="a640c992fde66716a21c259b497adf98d"></a><!-- doxytag: member="xgm.h::XGM_nextFrame" ref="a640c992fde66716a21c259b497adf98d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define XGM_nextFrame</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;XGM_nextXFrame(1)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Notify the Z80 a new frame just happened (XGM music player driver). </p>
<p>Sound synchronization was initially 100% done by Z80 itself using the V-Interrupt but if the Z80 is stopped right at V-Int time (bus request from 68000 or DMA stall) then the V-Int can be missed by the Z80 and music timing affected.<br/>
 To fix that issue and also to offer more flexibility the music timing should now be handled by the 68k.<br/>
 By default this method is called automatically by SGDK at V-Int time but you can decide to handle sync manually (see XGM_setManualSync(..) method).<br/>
 When you are in manual sync you normally should call this method once per frame (in the V-Int callback for instance) but you are free to play with it to increase or decrease music tempo.<br/>
 Note that it's better to call this method a bit before (3/4 scanlines should be fine) doing DMA operation for best main bus contention protection (see <a class="el" href="xgm_8h.html#a09d28faaea58861315be8021cfe29246" title="Set temporary 68K BUS protection from Z80 (XGM music player driver).  You should protect BUS Access d...">XGM_set68KBUSProtection()</a> and <a class="el" href="xgm_8h.html#a073c7829b30f3065a3fa11a4320901e7" title="This method can be used to improve the PCM playback during XGM music play and while DMA queue is used...">XGM_setForceDelayDMA()</a> methods).</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="xgm_8h.html#ac749922b1e66baf6a7e86e0277cf90fa" title="Set manual sync mode of XGM driver (by default auto sync is used).">XGM_setManualSync</a>(..) </dd>
<dd>
<a class="el" href="xgm_8h.html#acc620b1aa0f67a88a2757184409b418e" title="Same as XGM_nextFrame() except you can specify the numer of frame.">XGM_nextXFrame</a>(..) </dd>
<dd>
<a class="el" href="xgm_8h.html#a09d28faaea58861315be8021cfe29246" title="Set temporary 68K BUS protection from Z80 (XGM music player driver).  You should protect BUS Access d...">XGM_set68KBUSProtection</a>(..) </dd>
<dd>
<a class="el" href="xgm_8h.html#a073c7829b30f3065a3fa11a4320901e7" title="This method can be used to improve the PCM playback during XGM music play and while DMA queue is used...">XGM_setForceDelayDMA</a>(..) </dd></dl>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a917a5da737badb6591cb5a76585ac9ad"></a><!-- doxytag: member="xgm.h::XGM_getElapsed" ref="a917a5da737badb6591cb5a76585ac9ad" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#a449a74b72ed931d627eca7efcc6f8c9d">u32</a> XGM_getElapsed </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return the elapsed play time since the last <a class="el" href="xgm_8h.html#a6c9a3bf84dde1b65d38f6ea4ce65a362" title="Start playing the specified XGM track (XGM music player driver).">XGM_startPlay</a>(..) call.<br/>
 The returned value is in music frame which can be 50/60 per second depending the base music play rate (NTSC/PAL). </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="xgm_8h.html#a6c9a3bf84dde1b65d38f6ea4ce65a362" title="Start playing the specified XGM track (XGM music player driver).">XGM_startPlay</a>(..) </dd>
<dd>
<a class="el" href="xgm_8h.html#a0c8bcd5a25ed74ee379b2c415a25e95d" title="Set the music tempo (in tick per second).  Default value is 60 or 50 depending the system is NTSC or ...">XGM_setMusicTempo()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ad9dc54c2a7cd28a45c94df19a02b6477"></a><!-- doxytag: member="xgm.h::XGM_getForceDelayDMA" ref="ad9dc54c2a7cd28a45c94df19a02b6477" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a> XGM_getForceDelayDMA </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns <a class="el" href="types_8h.html#aa8cecfc5c5c054d2875c03e77b7be15d" title="TRUE define (equivalent to 1).">TRUE</a> if DMA delay is enabled to improve PCM playback. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="xgm_8h.html#a073c7829b30f3065a3fa11a4320901e7" title="This method can be used to improve the PCM playback during XGM music play and while DMA queue is used...">XGM_setForceDelayDMA()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="aef580c937fc13c77d6940fa1f4f5a516"></a><!-- doxytag: member="xgm.h::XGM_getManualSync" ref="aef580c937fc13c77d6940fa1f4f5a516" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a> XGM_getManualSync </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Returns manual sync mode state of XGM driver (by default auto sync is used). </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="xgm_8h.html#ac749922b1e66baf6a7e86e0277cf90fa" title="Set manual sync mode of XGM driver (by default auto sync is used).">XGM_setManualSync()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="aaf398bd127f974895a8b6b3042c1a99a"></a><!-- doxytag: member="xgm.h::XGM_getMusicTempo" ref="aaf398bd127f974895a8b6b3042c1a99a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a> XGM_getMusicTempo </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Get the current music tempo (in tick per second).<br/>
 Default value is 60 or 50 depending the system is NTSC or PAL.<br/>
 This method is meaningful only if you use the automatic music sync mode (see <a class="el" href="xgm_8h.html#ac749922b1e66baf6a7e86e0277cf90fa" title="Set manual sync mode of XGM driver (by default auto sync is used).">XGM_setManualSync()</a> method) which is the default mode.<br/>
 Note that using specific tempo (not 60 or 50) will affect performance of DMA contention and external command parsing so it's recommended to stand with default one. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="xgm_8h.html#ac749922b1e66baf6a7e86e0277cf90fa" title="Set manual sync mode of XGM driver (by default auto sync is used).">XGM_setManualSync()</a> </dd>
<dd>
<a class="el" href="xgm_8h.html#a0c8bcd5a25ed74ee379b2c415a25e95d" title="Set the music tempo (in tick per second).  Default value is 60 or 50 depending the system is NTSC or ...">XGM_setMusicTempo()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a3446bcd38404e76b891dd4652f8568d8"></a><!-- doxytag: member="xgm.h::XGM_isPlayingPCM" ref="a3446bcd38404e76b891dd4652f8568d8" args="(const u16 channel_mask)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#ab9f930ae0484417a1883fd3f7cdb490e">u8</a> XGM_isPlayingPCM </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a>&#160;</td>
          <td class="paramname"><em>channel_mask</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Return play status of specified PCM channel (XGM music player driver). </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">channel_mask</td><td>Channel(s) we want to retrieve play state.<br/>
 <a class="el" href="sound_8h.html#a38883db6ec938518d241833494ebc0a4" title="PCM channel 1 selection mask.">SOUND_PCM_CH1_MSK</a> = channel 1<br/>
 <a class="el" href="sound_8h.html#ac01265e4e27761284a3d2532c6e51456" title="PCM channel 2 selection mask.">SOUND_PCM_CH2_MSK</a> = channel 2<br/>
 <a class="el" href="sound_8h.html#a37e5564a0281b0e8cf65be2330e0393f" title="PCM channel 3 selection mask.">SOUND_PCM_CH3_MSK</a> = channel 3<br/>
 <a class="el" href="sound_8h.html#a04d181860b3bab7a707db0d95e5432cf" title="PCM channel 4 selection mask.">SOUND_PCM_CH4_MSK</a> = channel 4<br/>
 <br/>
 You can combine mask to retrieve state of severals channels at once:<br/>
 <code>isPlayingPCM(SOUND_PCM_CH1_MSK | SOUND_PCM_CH2_MSK)</code><br/>
 will actually return play state for channel 1 and channel 2.</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>Return the channel mask of current playing channel(s).<br/>
 For instance it returns (SOUND_PCM_CH1_MSK | SOUND_PCM_CH3_MSK) if channels 1 and 3 are currently playing. </dd></dl>

</div>
</div>
<a class="anchor" id="acc620b1aa0f67a88a2757184409b418e"></a><!-- doxytag: member="xgm.h::XGM_nextXFrame" ref="acc620b1aa0f67a88a2757184409b418e" args="(u16 num)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void XGM_nextXFrame </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a>&#160;</td>
          <td class="paramname"><em>num</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Same as <a class="el" href="xgm_8h.html#a640c992fde66716a21c259b497adf98d" title="Notify the Z80 a new frame just happened (XGM music player driver).">XGM_nextFrame()</a> except you can specify the numer of frame. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="xgm_8h.html#a640c992fde66716a21c259b497adf98d" title="Notify the Z80 a new frame just happened (XGM music player driver).">XGM_nextFrame</a>(..) </dd></dl>

</div>
</div>
<a class="anchor" id="a8a0eda7746cc40e0642b3fab58d79584"></a><!-- doxytag: member="xgm.h::XGM_pausePlay" ref="a8a0eda7746cc40e0642b3fab58d79584" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void XGM_pausePlay </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Pause playing music, music can be resumed by calling <a class="el" href="xgm_8h.html#adfcc6dfd90ee5311c04cfd7947f7c32c" title="Resume playing music after pausing with XGM_pausePlay (XGM music player driver).  Note that due to th...">XGM_resumePlay</a> (XGM music player driver).<br/>
 Note that due to the nature of the music chip (FM synthesis), resume play operation will never be perfect and some notes will miss until next key-on event occurs. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="xgm_8h.html#adfcc6dfd90ee5311c04cfd7947f7c32c" title="Resume playing music after pausing with XGM_pausePlay (XGM music player driver).  Note that due to th...">XGM_resumePlay</a> </dd>
<dd>
<a class="el" href="xgm_8h.html#a00e8cc267ce9301beb17bf2cf9662d71" title="Stop playing music (XGM music player driver).">XGM_stopPlay</a> </dd></dl>

</div>
</div>
<a class="anchor" id="adfcc6dfd90ee5311c04cfd7947f7c32c"></a><!-- doxytag: member="xgm.h::XGM_resumePlay" ref="adfcc6dfd90ee5311c04cfd7947f7c32c" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void XGM_resumePlay </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Resume playing music after pausing with XGM_pausePlay (XGM music player driver).<br/>
 Note that due to the nature of the music chip (FM synthesis), resume play operation will never be perfect and some notes will miss until next key-on event occurs. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="xgm_8h.html#a8a0eda7746cc40e0642b3fab58d79584" title="Pause playing music, music can be resumed by calling XGM_resumePlay (XGM music player driver)...">XGM_pausePlay</a> </dd>
<dd>
<a class="el" href="xgm_8h.html#a640c992fde66716a21c259b497adf98d" title="Notify the Z80 a new frame just happened (XGM music player driver).">XGM_nextFrame</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a09d28faaea58861315be8021cfe29246"></a><!-- doxytag: member="xgm.h::XGM_set68KBUSProtection" ref="a09d28faaea58861315be8021cfe29246" args="(u8 value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void XGM_set68KBUSProtection </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="types_8h.html#ab9f930ae0484417a1883fd3f7cdb490e">u8</a>&#160;</td>
          <td class="paramname"><em>value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set temporary 68K BUS protection from Z80 (XGM music player driver).<br/>
 You should protect BUS Access during DMA and restore it after:<br/>
 XGM_set68KBUSProtection(TRUE); <a class="el" href="vdp__dma_8h.html#a0806f0a5e7e102869a653e0a8d573959">VDP_doVRamDMA(data, 0x1000, 0x100)</a>; XGM_set68KBUSProtection(FALSE);. </p>
<p>This way the XGM driver will *try* to avoid using 68K BUS during DMA to avoid execution interruption and so preserve PCM playback quality.<br/>
 Note that the success of the operation is not 100% garantee and can fails in some conditions (heavy Z80 load, lot of PSG data in XGM music), you can also improve the PCM playblack by using the <a class="el" href="xgm_8h.html#a073c7829b30f3065a3fa11a4320901e7" title="This method can be used to improve the PCM playback during XGM music play and while DMA queue is used...">XGM_setForceDelayDMA()</a> method.</p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="xgm_8h.html#a073c7829b30f3065a3fa11a4320901e7" title="This method can be used to improve the PCM playback during XGM music play and while DMA queue is used...">XGM_setForceDelayDMA</a>(..) </dd></dl>

</div>
</div>
<a class="anchor" id="a073c7829b30f3065a3fa11a4320901e7"></a><!-- doxytag: member="xgm.h::XGM_setForceDelayDMA" ref="a073c7829b30f3065a3fa11a4320901e7" args="(u16 value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void XGM_setForceDelayDMA </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a>&#160;</td>
          <td class="paramname"><em>value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>This method can be used to improve the PCM playback during XGM music play and while DMA queue is used.<br/>
 Even using the BUS protection with <a class="el" href="xgm_8h.html#a09d28faaea58861315be8021cfe29246" title="Set temporary 68K BUS protection from Z80 (XGM music player driver).  You should protect BUS Access d...">XGM_set68KBUSProtection</a> you may experience some altered PCM when the XGM music contains PSG data, this is because the Z80 uses the main BUS to access PSG.<br/>
 By delaying a bit the DMA execution from the DMA queue we let the Z80 to execute all PSG commands and avoid any stall. The delay is about 3 scanlines so using the force delay DMA will reduce the DMA bandwidth for about 3 vblank lines. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">value</td><td>TRUE or FALSE </td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="xgm_8h.html#ad9dc54c2a7cd28a45c94df19a02b6477" title="Returns TRUE if DMA delay is enabled to improve PCM playback.">XGM_getForceDelayDMA()</a> </dd>
<dd>
<a class="el" href="xgm_8h.html#a09d28faaea58861315be8021cfe29246" title="Set temporary 68K BUS protection from Z80 (XGM music player driver).  You should protect BUS Access d...">XGM_set68KBUSProtection()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="ac749922b1e66baf6a7e86e0277cf90fa"></a><!-- doxytag: member="xgm.h::XGM_setManualSync" ref="ac749922b1e66baf6a7e86e0277cf90fa" args="(u16 value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void XGM_setManualSync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a>&#160;</td>
          <td class="paramname"><em>value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set manual sync mode of XGM driver (by default auto sync is used). </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">value</td><td>TRUE or FALSE </td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="xgm_8h.html#aef580c937fc13c77d6940fa1f4f5a516" title="Returns manual sync mode state of XGM driver (by default auto sync is used).">XGM_getManualSync()</a> </dd>
<dd>
<a class="el" href="xgm_8h.html#a640c992fde66716a21c259b497adf98d" title="Notify the Z80 a new frame just happened (XGM music player driver).">XGM_nextFrame()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a0c8bcd5a25ed74ee379b2c415a25e95d"></a><!-- doxytag: member="xgm.h::XGM_setMusicTempo" ref="a0c8bcd5a25ed74ee379b2c415a25e95d" args="(u16 value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void XGM_setMusicTempo </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a>&#160;</td>
          <td class="paramname"><em>value</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set the music tempo (in tick per second).<br/>
 Default value is 60 or 50 depending the system is NTSC or PAL. This method is meaningful only if you use the automatic music sync mode (see <a class="el" href="xgm_8h.html#ac749922b1e66baf6a7e86e0277cf90fa" title="Set manual sync mode of XGM driver (by default auto sync is used).">XGM_setManualSync()</a> method) which is the default mode.<br/>
 Note that using specific tempo (not 60 or 50) can completely distord FM instruments sound and affect performance of DMA contention and external command parsing so it's recommended to stand with default one. </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="xgm_8h.html#ac749922b1e66baf6a7e86e0277cf90fa" title="Set manual sync mode of XGM driver (by default auto sync is used).">XGM_setManualSync()</a> </dd>
<dd>
<a class="el" href="xgm_8h.html#aaf398bd127f974895a8b6b3042c1a99a" title="Get the current music tempo (in tick per second).  Default value is 60 or 50 depending the system is ...">XGM_getMusicTempo()</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a9203faa0b1ebfe1f264095affc4b9562"></a><!-- doxytag: member="xgm.h::XGM_setPCM" ref="a9203faa0b1ebfe1f264095affc4b9562" args="(const u8 id, const u8 *sample, const u32 len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void XGM_setPCM </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="types_8h.html#ab9f930ae0484417a1883fd3f7cdb490e">u8</a>&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="types_8h.html#ab9f930ae0484417a1883fd3f7cdb490e">u8</a> *&#160;</td>
          <td class="paramname"><em>sample</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="types_8h.html#a449a74b72ed931d627eca7efcc6f8c9d">u32</a>&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Declare a new PCM sample (maximum = 255) for the XGM music player driver.<br/>
 Sample id &lt; 64 are reserved for music while others are used for SFX so if you want to declare a new SFX PCM sample use an id &gt;= 64. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>Sample id:<br/>
 value 0 is not allowed<br/>
 values from 1 to 63 are used for music values from 64 to 255 are used for SFX </td></tr>
    <tr><td class="paramname">sample</td><td>Sample address, should be 256 bytes boundary aligned<br/>
 SGDK automatically align sample resource as needed </td></tr>
    <tr><td class="paramname">len</td><td>Size of sample in bytes, should be a multiple of 256<br/>
 SGDK automatically adjust resource size as needed </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a0f22f83f4c2fbebf4b51a4f87c193a3f"></a><!-- doxytag: member="xgm.h::XGM_setPCMFast" ref="a0f22f83f4c2fbebf4b51a4f87c193a3f" args="(const u8 id, const u8 *sample, const u32 len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void XGM_setPCMFast </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="types_8h.html#ab9f930ae0484417a1883fd3f7cdb490e">u8</a>&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="types_8h.html#ab9f930ae0484417a1883fd3f7cdb490e">u8</a> *&#160;</td>
          <td class="paramname"><em>sample</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="types_8h.html#a449a74b72ed931d627eca7efcc6f8c9d">u32</a>&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Same as <a class="el" href="xgm_8h.html#a9203faa0b1ebfe1f264095affc4b9562" title="Declare a new PCM sample (maximum = 255) for the XGM music player driver.  Sample id &lt; 64 are reserve...">XGM_setPCM</a> but fast version.<br/>
 This method assume that XGM driver is loaded and that 68000 has access to Z80 bus. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>Sample id:<br/>
 value 0 is not allowed<br/>
 values from 1 to 63 are used for music values from 64 to 255 are used for SFX </td></tr>
    <tr><td class="paramname">sample</td><td>Sample address, should be 256 bytes boundary aligned<br/>
 SGDK automatically align sample resource as needed </td></tr>
    <tr><td class="paramname">len</td><td>Size of sample in bytes, should be a multiple of 256<br/>
 SGDK automatically adjust resource size as needed </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a6c9a3bf84dde1b65d38f6ea4ce65a362"></a><!-- doxytag: member="xgm.h::XGM_startPlay" ref="a6c9a3bf84dde1b65d38f6ea4ce65a362" args="(const u8 *song)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void XGM_startPlay </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="types_8h.html#ab9f930ae0484417a1883fd3f7cdb490e">u8</a> *&#160;</td>
          <td class="paramname"><em>song</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Start playing the specified XGM track (XGM music player driver). </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">song</td><td>XGM track address.</td></tr>
  </table>
  </dd>
</dl>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="xgm_8h.html#a00e8cc267ce9301beb17bf2cf9662d71" title="Stop playing music (XGM music player driver).">XGM_stopPlay</a> </dd>
<dd>
<a class="el" href="xgm_8h.html#a8a0eda7746cc40e0642b3fab58d79584" title="Pause playing music, music can be resumed by calling XGM_resumePlay (XGM music player driver)...">XGM_pausePlay</a> </dd>
<dd>
<a class="el" href="xgm_8h.html#a640c992fde66716a21c259b497adf98d" title="Notify the Z80 a new frame just happened (XGM music player driver).">XGM_nextFrame</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a5dbd3b8171aca6cc18e8c83719ec2785"></a><!-- doxytag: member="xgm.h::XGM_startPlayPCM" ref="a5dbd3b8171aca6cc18e8c83719ec2785" args="(const u8 id, const u8 priority, const u16 channel)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void XGM_startPlayPCM </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="types_8h.html#ab9f930ae0484417a1883fd3f7cdb490e">u8</a>&#160;</td>
          <td class="paramname"><em>id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="types_8h.html#ab9f930ae0484417a1883fd3f7cdb490e">u8</a>&#160;</td>
          <td class="paramname"><em>priority</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a>&#160;</td>
          <td class="paramname"><em>channel</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Play a PCM sample on specified channel (XGM music player driver).<br/>
 If a sample was currently playing on this channel then priority of the newer sample should be are compared then it's stopped and the new sample is played instead.<br/>
 Note that music may use the first PCM channel so it's better to use channel 2 to 4 for SFX. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">id</td><td>Sample id (use <a class="el" href="xgm_8h.html#a9203faa0b1ebfe1f264095affc4b9562" title="Declare a new PCM sample (maximum = 255) for the XGM music player driver.  Sample id &lt; 64 are reserve...">XGM_setPCM</a>(..) method first to set id) </td></tr>
    <tr><td class="paramname">priority</td><td>Value should go from 0 to 15 where 0 is lowest priority and 15 the highest one.<br/>
 If the channel was already playing the priority is used to determine if the new SFX should replace the current one (new priority &gt;= old priority). </td></tr>
    <tr><td class="paramname">channel</td><td>Channel where we want to play sample.<br/>
 <a class="el" href="sound_8h.html#a2160fc5a6b171154759a3af5bd139c73" title="PCM channel 1.">SOUND_PCM_CH1</a> = channel 1 (usually used by music)<br/>
 <a class="el" href="sound_8h.html#a95db57f49f8a2fc948fd70ae82735d3a" title="PCM channel 2.">SOUND_PCM_CH2</a> = channel 2<br/>
 <a class="el" href="sound_8h.html#a5e82bbc48267d16c7e73b3e0eeebf693" title="PCM channel 3.">SOUND_PCM_CH3</a> = channel 3<br/>
 <a class="el" href="sound_8h.html#a51a991a68874e0fa36567ee94617c2da" title="PCM channel 4.">SOUND_PCM_CH4</a> = channel 4<br/>
 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a00e8cc267ce9301beb17bf2cf9662d71"></a><!-- doxytag: member="xgm.h::XGM_stopPlay" ref="a00e8cc267ce9301beb17bf2cf9662d71" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void XGM_stopPlay </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Stop playing music (XGM music player driver). </p>
<dl class="see"><dt><b>See also:</b></dt><dd><a class="el" href="xgm_8h.html#a8a0eda7746cc40e0642b3fab58d79584" title="Pause playing music, music can be resumed by calling XGM_resumePlay (XGM music player driver)...">XGM_pausePlay</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a54ea961467892bb1232c535af317fb05"></a><!-- doxytag: member="xgm.h::XGM_stopPlayPCM" ref="a54ea961467892bb1232c535af317fb05" args="(const u16 channel)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void XGM_stopPlayPCM </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="types_8h.html#a8aa9149a22317014c683c48cebd8cfef">u16</a>&#160;</td>
          <td class="paramname"><em>channel</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Stop play PCM on specified channel (XGM music player driver).<br/>
 No effect if no sample was currently playing on this channel. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">channel</td><td>Channel we want to stop.<br/>
 <a class="el" href="sound_8h.html#a2160fc5a6b171154759a3af5bd139c73" title="PCM channel 1.">SOUND_PCM_CH1</a> = channel 1<br/>
 <a class="el" href="sound_8h.html#a95db57f49f8a2fc948fd70ae82735d3a" title="PCM channel 2.">SOUND_PCM_CH2</a> = channel 2<br/>
 <a class="el" href="sound_8h.html#a5e82bbc48267d16c7e73b3e0eeebf693" title="PCM channel 3.">SOUND_PCM_CH3</a> = channel 3<br/>
 <a class="el" href="sound_8h.html#a51a991a68874e0fa36567ee94617c2da" title="PCM channel 4.">SOUND_PCM_CH4</a> = channel 4<br/>
 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div>
</div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="xgm_8h.html">xgm.h</a>      </li>
      <li class="footer">Generated on Wed Dec 2 2020 22:53:20 for sgdk by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.4 </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>


</body>
</html>
